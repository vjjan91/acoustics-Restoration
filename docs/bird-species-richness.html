<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 8 Bird Species Richness | Source code and supporting information for Using passive acoustic monitoring to examine the impacts of ecological restoration on faunal biodiversity in the Western Ghats</title>
  <meta name="description" content="Section 8 Bird Species Richness | Source code and supporting information for Using passive acoustic monitoring to examine the impacts of ecological restoration on faunal biodiversity in the Western Ghats" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 8 Bird Species Richness | Source code and supporting information for Using passive acoustic monitoring to examine the impacts of ecological restoration on faunal biodiversity in the Western Ghats" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="vjjan91/acoustics-Restoration" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 8 Bird Species Richness | Source code and supporting information for Using passive acoustic monitoring to examine the impacts of ecological restoration on faunal biodiversity in the Western Ghats" />
  
  
  

<meta name="author" content="Vijay Ramesh" />
<meta name="author" content="Priyanka Hariharan" />
<meta name="author" content="VA Akshay" />
<meta name="author" content="Pooja Choksi" />
<meta name="author" content="Sarika Khanwilkar" />
<meta name="author" content="VV Robin" />
<meta name="author" content="Ruth DeFries" />


<meta name="date" content="2022-08-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="splitting-large-.wav-files.html"/>
<link rel="next" href="acoustic-detections.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#attribution"><i class="fa fa-check"></i><b>1.1</b> Attribution</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#data-access"><i class="fa fa-check"></i><b>1.2</b> Data access</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#data-processing"><i class="fa fa-check"></i><b>1.3</b> Data processing</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#main-text-figure-1"><i class="fa fa-check"></i><b>1.4</b> Main Text Figure 1</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#main-text-figure-2"><i class="fa fa-check"></i><b>1.5</b> Main Text Figure 2</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="site-selection.html"><a href="site-selection.html"><i class="fa fa-check"></i><b>2</b> Site selection</a>
<ul>
<li class="chapter" data-level="2.1" data-path="site-selection.html"><a href="site-selection.html#install-required-libraries"><i class="fa fa-check"></i><b>2.1</b> Install required libraries</a></li>
<li class="chapter" data-level="2.2" data-path="site-selection.html"><a href="site-selection.html#load-list-of-sites"><i class="fa fa-check"></i><b>2.2</b> Load list of sites</a></li>
<li class="chapter" data-level="2.3" data-path="site-selection.html"><a href="site-selection.html#extract-elevation"><i class="fa fa-check"></i><b>2.3</b> Extract elevation</a></li>
<li class="chapter" data-level="2.4" data-path="site-selection.html"><a href="site-selection.html#distance-to-nearest-road"><i class="fa fa-check"></i><b>2.4</b> Distance to nearest road</a></li>
<li class="chapter" data-level="2.5" data-path="site-selection.html"><a href="site-selection.html#distance-between-ar-nr-site-pairs"><i class="fa fa-check"></i><b>2.5</b> Distance between AR-NR site pairs</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="processing-vegetation-data.html"><a href="processing-vegetation-data.html"><i class="fa fa-check"></i><b>3</b> Processing vegetation data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="processing-vegetation-data.html"><a href="processing-vegetation-data.html#install-required-libraries-1"><i class="fa fa-check"></i><b>3.1</b> Install required libraries</a></li>
<li class="chapter" data-level="3.2" data-path="processing-vegetation-data.html"><a href="processing-vegetation-data.html#load-the-vegetation-data"><i class="fa fa-check"></i><b>3.2</b> Load the vegetation data</a></li>
<li class="chapter" data-level="3.3" data-path="processing-vegetation-data.html"><a href="processing-vegetation-data.html#process-habitat-structure-variables"><i class="fa fa-check"></i><b>3.3</b> Process habitat structure variables</a></li>
<li class="chapter" data-level="3.4" data-path="processing-vegetation-data.html"><a href="processing-vegetation-data.html#principal-component-analysis-of-vegetation-data"><i class="fa fa-check"></i><b>3.4</b> Principal component analysis of vegetation data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="acoustic-space-use.html"><a href="acoustic-space-use.html"><i class="fa fa-check"></i><b>4</b> Acoustic space use</a>
<ul>
<li class="chapter" data-level="4.1" data-path="acoustic-space-use.html"><a href="acoustic-space-use.html#install-necessary-libraries"><i class="fa fa-check"></i><b>4.1</b> Install necessary libraries</a></li>
<li class="chapter" data-level="4.2" data-path="acoustic-space-use.html"><a href="acoustic-space-use.html#load-recordings-across-multiple-days-and-sites"><i class="fa fa-check"></i><b>4.2</b> Load recordings across multiple days and sites</a></li>
<li class="chapter" data-level="4.3" data-path="acoustic-space-use.html"><a href="acoustic-space-use.html#short-time-discrete-fourier-transform-stdft"><i class="fa fa-check"></i><b>4.3</b> Short-time discrete fourier transform (STDFT)</a></li>
<li class="chapter" data-level="4.4" data-path="acoustic-space-use.html"><a href="acoustic-space-use.html#average-acoustic-space-use"><i class="fa fa-check"></i><b>4.4</b> Average acoustic space use</a></li>
<li class="chapter" data-level="4.5" data-path="acoustic-space-use.html"><a href="acoustic-space-use.html#visual-examination-of-asu"><i class="fa fa-check"></i><b>4.5</b> Visual examination of ASU</a></li>
<li class="chapter" data-level="4.6" data-path="acoustic-space-use.html"><a href="acoustic-space-use.html#representative-figure-for-publication"><i class="fa fa-check"></i><b>4.6</b> Representative figure for publication</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html"><a href="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html"><i class="fa fa-check"></i><b>5</b> Non-metric multidimensional scaling of acoustic space use data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html"><a href="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html#load-necessary-libraries-for-analysis"><i class="fa fa-check"></i><b>5.1</b> Load necessary libraries for analysis</a></li>
<li class="chapter" data-level="5.2" data-path="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html"><a href="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html#load-the-necessary-data-for-nmds-calculations"><i class="fa fa-check"></i><b>5.2</b> Load the necessary data for nmds calculations</a></li>
<li class="chapter" data-level="5.3" data-path="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html"><a href="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html#preparing-a-dataframe-of-space-use-to-run-ordinations"><i class="fa fa-check"></i><b>5.3</b> Preparing a dataframe of space use to run ordinations</a></li>
<li class="chapter" data-level="5.4" data-path="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html"><a href="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html#plotting-the-nmds-scores"><i class="fa fa-check"></i><b>5.4</b> Plotting the NMDS scores</a></li>
<li class="chapter" data-level="5.5" data-path="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html"><a href="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html#testing-multivariate-homogeneity-of-group-dispersions"><i class="fa fa-check"></i><b>5.5</b> Testing multivariate homogeneity of group dispersions</a></li>
<li class="chapter" data-level="5.6" data-path="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html"><a href="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html#visualizing-the-multivariate-homogeneity-of-group-dispersions"><i class="fa fa-check"></i><b>5.6</b> Visualizing the multivariate homogeneity of group dispersions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html"><a href="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html"><i class="fa fa-check"></i><b>6</b> Generalized linear mixed modeling (acoustic space use and vegetation data)</a>
<ul>
<li class="chapter" data-level="6.1" data-path="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html"><a href="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html#install-required-libraries-2"><i class="fa fa-check"></i><b>6.1</b> Install required libraries</a></li>
<li class="chapter" data-level="6.2" data-path="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html"><a href="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html#load-necessary-data-for-statistical-modeling"><i class="fa fa-check"></i><b>6.2</b> Load necessary data for statistical modeling</a></li>
<li class="chapter" data-level="6.3" data-path="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html"><a href="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html#getting-data-ready-in-a-format-for-linear-modeling"><i class="fa fa-check"></i><b>6.3</b> Getting data ready in a format for linear modeling</a></li>
<li class="chapter" data-level="6.4" data-path="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html"><a href="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html#running-the-generalized-linear-mixed-models"><i class="fa fa-check"></i><b>6.4</b> Running the generalized linear mixed models</a></li>
<li class="chapter" data-level="6.5" data-path="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html"><a href="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html#we-now-run-generalized-linear-mixed-models-glmm-assuming-gaussian-errors-and-using-log-link-functions-to-examine-the-effects-of-habitat-vegetation-structure-on-acoustic-space-use."><i class="fa fa-check"></i><b>6.5</b> We now run generalized linear mixed models (GLMM) assuming gaussian errors and using log link functions to examine the effects of habitat (vegetation structure) on acoustic space use.</a></li>
<li class="chapter" data-level="6.6" data-path="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html"><a href="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html#main-text-figure-4"><i class="fa fa-check"></i><b>6.6</b> Main Text Figure 4</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="splitting-large-.wav-files.html"><a href="splitting-large-.wav-files.html"><i class="fa fa-check"></i><b>7</b> Splitting large .wav files</a>
<ul>
<li class="chapter" data-level="7.1" data-path="splitting-large-.wav-files.html"><a href="splitting-large-.wav-files.html#load-required-libraries"><i class="fa fa-check"></i><b>7.1</b> Load required libraries</a></li>
<li class="chapter" data-level="7.2" data-path="splitting-large-.wav-files.html"><a href="splitting-large-.wav-files.html#selecting-dawn-acoustic-data"><i class="fa fa-check"></i><b>7.2</b> Selecting dawn acoustic data</a></li>
<li class="chapter" data-level="7.3" data-path="splitting-large-.wav-files.html"><a href="splitting-large-.wav-files.html#split-the-files"><i class="fa fa-check"></i><b>7.3</b> Split the files</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="bird-species-richness.html"><a href="bird-species-richness.html"><i class="fa fa-check"></i><b>8</b> Bird Species Richness</a>
<ul>
<li class="chapter" data-level="8.1" data-path="bird-species-richness.html"><a href="bird-species-richness.html#install-required-libraries-3"><i class="fa fa-check"></i><b>8.1</b> Install required libraries</a></li>
<li class="chapter" data-level="8.2" data-path="bird-species-richness.html"><a href="bird-species-richness.html#load-manual-annotations-data"><i class="fa fa-check"></i><b>8.2</b> Load manual annotations data</a></li>
<li class="chapter" data-level="8.3" data-path="bird-species-richness.html"><a href="bird-species-richness.html#subset-data"><i class="fa fa-check"></i><b>8.3</b> Subset data</a></li>
<li class="chapter" data-level="8.4" data-path="bird-species-richness.html"><a href="bird-species-richness.html#total-number-of-detections"><i class="fa fa-check"></i><b>8.4</b> Total number of detections</a></li>
<li class="chapter" data-level="8.5" data-path="bird-species-richness.html"><a href="bird-species-richness.html#calculate-species-richness"><i class="fa fa-check"></i><b>8.5</b> Calculate species richness</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="acoustic-detections.html"><a href="acoustic-detections.html"><i class="fa fa-check"></i><b>9</b> Acoustic Detections</a>
<ul>
<li class="chapter" data-level="9.1" data-path="acoustic-detections.html"><a href="acoustic-detections.html#install-required-libraries-4"><i class="fa fa-check"></i><b>9.1</b> Install required libraries</a></li>
<li class="chapter" data-level="9.2" data-path="acoustic-detections.html"><a href="acoustic-detections.html#load-data"><i class="fa fa-check"></i><b>9.2</b> Load data</a></li>
<li class="chapter" data-level="9.3" data-path="acoustic-detections.html"><a href="acoustic-detections.html#overall-number-of-detections"><i class="fa fa-check"></i><b>9.3</b> Overall number of detections</a></li>
<li class="chapter" data-level="9.4" data-path="acoustic-detections.html"><a href="acoustic-detections.html#detections-by-treatment-type"><i class="fa fa-check"></i><b>9.4</b> Detections by treatment type</a></li>
<li class="chapter" data-level="9.5" data-path="acoustic-detections.html"><a href="acoustic-detections.html#detections-by-species-traits"><i class="fa fa-check"></i><b>9.5</b> Detections by species traits</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="species-proportions.html"><a href="species-proportions.html"><i class="fa fa-check"></i><b>10</b> Species proportions</a>
<ul>
<li class="chapter" data-level="10.1" data-path="species-proportions.html"><a href="species-proportions.html#install-required-libraries-5"><i class="fa fa-check"></i><b>10.1</b> Install required libraries</a></li>
<li class="chapter" data-level="10.2" data-path="species-proportions.html"><a href="species-proportions.html#load-the-necessary-data-to-calculate-proportions"><i class="fa fa-check"></i><b>10.2</b> Load the necessary data to calculate proportions</a></li>
<li class="chapter" data-level="10.3" data-path="species-proportions.html"><a href="species-proportions.html#proportion-of-acoustic-detections-across-all-10-s-chunks-for-every-site-date-combination"><i class="fa fa-check"></i><b>10.3</b> Proportion of acoustic detections across all 10-s chunks for every site-date combination</a></li>
<li class="chapter" data-level="10.4" data-path="species-proportions.html"><a href="species-proportions.html#testing-for-differences-in-species-acoustic-detections-across-treatment-types"><i class="fa fa-check"></i><b>10.4</b> Testing for differences in species acoustic detections across treatment types</a></li>
<li class="chapter" data-level="10.5" data-path="species-proportions.html"><a href="species-proportions.html#proportion-of-detections-across-acoustic-point-counts"><i class="fa fa-check"></i><b>10.5</b> Proportion of detections across acoustic point counts</a></li>
<li class="chapter" data-level="10.6" data-path="species-proportions.html"><a href="species-proportions.html#testing-for-differences-in-rainforest-and-open-country-species-detections-across-acoustic-point-counts"><i class="fa fa-check"></i><b>10.6</b> Testing for differences in rainforest and open-country species detections across acoustic point counts</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="non-metric-multidimensional-scaling-of-bird-species-detections.html"><a href="non-metric-multidimensional-scaling-of-bird-species-detections.html"><i class="fa fa-check"></i><b>11</b> Non-metric multidimensional scaling of bird species detections</a>
<ul>
<li class="chapter" data-level="11.1" data-path="non-metric-multidimensional-scaling-of-bird-species-detections.html"><a href="non-metric-multidimensional-scaling-of-bird-species-detections.html#install-required-libraries-6"><i class="fa fa-check"></i><b>11.1</b> Install required libraries</a></li>
<li class="chapter" data-level="11.2" data-path="non-metric-multidimensional-scaling-of-bird-species-detections.html"><a href="non-metric-multidimensional-scaling-of-bird-species-detections.html#load-the-necessary-data-for-nmds-calculations-1"><i class="fa fa-check"></i><b>11.2</b> Load the necessary data for NMDS calculations</a></li>
<li class="chapter" data-level="11.3" data-path="non-metric-multidimensional-scaling-of-bird-species-detections.html"><a href="non-metric-multidimensional-scaling-of-bird-species-detections.html#preparing-dataframe-of-traits-and-species-to-be-used-for-nmds-later-on"><i class="fa fa-check"></i><b>11.3</b> Preparing dataframe of traits and species to be used for NMDS later on</a></li>
<li class="chapter" data-level="11.4" data-path="non-metric-multidimensional-scaling-of-bird-species-detections.html"><a href="non-metric-multidimensional-scaling-of-bird-species-detections.html#preparing-a-dataframe-of-detections-to-run-ordinations"><i class="fa fa-check"></i><b>11.4</b> Preparing a dataframe of detections to run ordinations</a></li>
<li class="chapter" data-level="11.5" data-path="non-metric-multidimensional-scaling-of-bird-species-detections.html"><a href="non-metric-multidimensional-scaling-of-bird-species-detections.html#bray-curtis-dissimilarity-index"><i class="fa fa-check"></i><b>11.5</b> Bray-Curtis dissimilarity index</a></li>
<li class="chapter" data-level="11.6" data-path="non-metric-multidimensional-scaling-of-bird-species-detections.html"><a href="non-metric-multidimensional-scaling-of-bird-species-detections.html#plotting-the-nmds-scores-1"><i class="fa fa-check"></i><b>11.6</b> Plotting the NMDS scores</a></li>
<li class="chapter" data-level="11.7" data-path="non-metric-multidimensional-scaling-of-bird-species-detections.html"><a href="non-metric-multidimensional-scaling-of-bird-species-detections.html#main-text-figure-5"><i class="fa fa-check"></i><b>11.7</b> Main text Figure 5</a></li>
<li class="chapter" data-level="11.8" data-path="non-metric-multidimensional-scaling-of-bird-species-detections.html"><a href="non-metric-multidimensional-scaling-of-bird-species-detections.html#testing-multivariate-homogeneity-of-group-dispersions-1"><i class="fa fa-check"></i><b>11.8</b> Testing multivariate homogeneity of group dispersions</a></li>
<li class="chapter" data-level="11.9" data-path="non-metric-multidimensional-scaling-of-bird-species-detections.html"><a href="non-metric-multidimensional-scaling-of-bird-species-detections.html#visualizing-the-multivariate-homogeneity-of-group-dispersions-1"><i class="fa fa-check"></i><b>11.9</b> Visualizing the multivariate homogeneity of group dispersions</a></li>
<li class="chapter" data-level="11.10" data-path="non-metric-multidimensional-scaling-of-bird-species-detections.html"><a href="non-metric-multidimensional-scaling-of-bird-species-detections.html#testing-compositional-dissimilarity-between-groups"><i class="fa fa-check"></i><b>11.10</b> Testing compositional dissimilarity between groups</a></li>
<li class="chapter" data-level="11.11" data-path="non-metric-multidimensional-scaling-of-bird-species-detections.html"><a href="non-metric-multidimensional-scaling-of-bird-species-detections.html#separate-analysis-instead-of-using-bird-detections-using-richness-to-run-nmds-ordinations"><i class="fa fa-check"></i><b>11.11</b> Separate analysis: Instead of using bird detections, using richness to run nmds ordinations</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="jackknife-estimates.html"><a href="jackknife-estimates.html"><i class="fa fa-check"></i><b>12</b> Jackknife estimates</a>
<ul>
<li class="chapter" data-level="12.1" data-path="jackknife-estimates.html"><a href="jackknife-estimates.html#install-required-libraries-7"><i class="fa fa-check"></i><b>12.1</b> Install required libraries</a></li>
<li class="chapter" data-level="12.2" data-path="jackknife-estimates.html"><a href="jackknife-estimates.html#load-the-necessary-data-to-calculate-jackknife-scores"><i class="fa fa-check"></i><b>12.2</b> Load the necessary data to calculate Jackknife scores</a></li>
<li class="chapter" data-level="12.3" data-path="jackknife-estimates.html"><a href="jackknife-estimates.html#preparing-dataframe-to-extract-jacknife-scores"><i class="fa fa-check"></i><b>12.3</b> Preparing dataframe to extract jacknife scores</a></li>
<li class="chapter" data-level="12.4" data-path="jackknife-estimates.html"><a href="jackknife-estimates.html#save-scores-locally"><i class="fa fa-check"></i><b>12.4</b> Save scores locally</a></li>
<li class="chapter" data-level="12.5" data-path="jackknife-estimates.html"><a href="jackknife-estimates.html#looking-at-correlations-between-jacknife-scores-and-bootstrap-estimates"><i class="fa fa-check"></i><b>12.5</b> Looking at correlations between jacknife scores and bootstrap estimates</a></li>
<li class="chapter" data-level="12.6" data-path="jackknife-estimates.html"><a href="jackknife-estimates.html#testing-for-differences-between-treatment-types"><i class="fa fa-check"></i><b>12.6</b> Testing for differences between treatment types</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><i class="fa fa-check"></i><b>13</b> Generalized linear mixed modeling (species richness, vegetation data and planting year)</a>
<ul>
<li class="chapter" data-level="13.1" data-path="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html#install-required-libraries-8"><i class="fa fa-check"></i><b>13.1</b> Install required libraries</a></li>
<li class="chapter" data-level="13.2" data-path="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html#load-the-necessary-data-for-statistical-modeling"><i class="fa fa-check"></i><b>13.2</b> Load the necessary data for statistical modeling</a></li>
<li class="chapter" data-level="13.3" data-path="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html#getting-data-ready-in-a-format-for-generalized-linear-modeling"><i class="fa fa-check"></i><b>13.3</b> Getting data ready in a format for generalized linear modeling</a></li>
<li class="chapter" data-level="13.4" data-path="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html#getting-data-ready-for-generalized-linear-mixed-modeling-with-richness-data-as-well-as-visits."><i class="fa fa-check"></i><b>13.4</b> Getting data ready for generalized linear mixed modeling with richness data as well as visits.</a></li>
<li class="chapter" data-level="13.5" data-path="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html#running-the-generalized-linear-mixed-models-1"><i class="fa fa-check"></i><b>13.5</b> Running the generalized linear mixed models</a></li>
<li class="chapter" data-level="13.6" data-path="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html#testing-the-role-of-habitat"><i class="fa fa-check"></i><b>13.6</b> Testing the role of habitat</a></li>
<li class="chapter" data-level="13.7" data-path="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html#effect-of-planting-year"><i class="fa fa-check"></i><b>13.7</b> Effect of planting year</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="generalized-linear-mixed-modeling-species-proportions-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-proportions-vegetation-data-and-planting-year.html"><i class="fa fa-check"></i><b>14</b> Generalized linear mixed modeling (species proportions, vegetation data and planting year)</a>
<ul>
<li class="chapter" data-level="14.1" data-path="generalized-linear-mixed-modeling-species-proportions-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-proportions-vegetation-data-and-planting-year.html#install-required-libraries-9"><i class="fa fa-check"></i><b>14.1</b> Install required libraries</a></li>
<li class="chapter" data-level="14.2" data-path="generalized-linear-mixed-modeling-species-proportions-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-proportions-vegetation-data-and-planting-year.html#load-the-necessary-data-for-statistical-modeling-1"><i class="fa fa-check"></i><b>14.2</b> Load the necessary data for statistical modeling</a></li>
<li class="chapter" data-level="14.3" data-path="generalized-linear-mixed-modeling-species-proportions-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-proportions-vegetation-data-and-planting-year.html#getting-data-ready-in-a-format-for-generalized-linear-mixed-modeling"><i class="fa fa-check"></i><b>14.3</b> Getting data ready in a format for generalized linear mixed modeling</a></li>
<li class="chapter" data-level="14.4" data-path="generalized-linear-mixed-modeling-species-proportions-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-proportions-vegetation-data-and-planting-year.html#running-the-generalized-linear-mixed-models-2"><i class="fa fa-check"></i><b>14.4</b> Running the generalized linear mixed models</a></li>
<li class="chapter" data-level="14.5" data-path="generalized-linear-mixed-modeling-species-proportions-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-proportions-vegetation-data-and-planting-year.html#examining-effect-of-restoration-type-on-proportion-of-rainforest-and-open-country-species-detections"><i class="fa fa-check"></i><b>14.5</b> Examining effect of restoration type on proportion of rainforest and open-country species detections</a></li>
<li class="chapter" data-level="14.6" data-path="generalized-linear-mixed-modeling-species-proportions-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-proportions-vegetation-data-and-planting-year.html#testing-the-role-of-habitat-1"><i class="fa fa-check"></i><b>14.6</b> Testing the role of habitat</a></li>
<li class="chapter" data-level="14.7" data-path="generalized-linear-mixed-modeling-species-proportions-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-proportions-vegetation-data-and-planting-year.html#effect-of-planting-year-1"><i class="fa fa-check"></i><b>14.7</b> Effect of planting year</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="generalized-linear-modeling-acoustic-space-use-and-proportion-of-bird-species-detections-and-time-since-restoration.html"><a href="generalized-linear-modeling-acoustic-space-use-and-proportion-of-bird-species-detections-and-time-since-restoration.html"><i class="fa fa-check"></i><b>15</b> Generalized linear modeling (acoustic space use and proportion of bird species detections and time since restoration)</a>
<ul>
<li class="chapter" data-level="15.1" data-path="generalized-linear-modeling-acoustic-space-use-and-proportion-of-bird-species-detections-and-time-since-restoration.html"><a href="generalized-linear-modeling-acoustic-space-use-and-proportion-of-bird-species-detections-and-time-since-restoration.html#install-required-libraries-10"><i class="fa fa-check"></i><b>15.1</b> Install required libraries</a></li>
<li class="chapter" data-level="15.2" data-path="generalized-linear-modeling-acoustic-space-use-and-proportion-of-bird-species-detections-and-time-since-restoration.html"><a href="generalized-linear-modeling-acoustic-space-use-and-proportion-of-bird-species-detections-and-time-since-restoration.html#load-necessary-data-for-statistical-modeling-1"><i class="fa fa-check"></i><b>15.2</b> Load necessary data for statistical modeling</a></li>
<li class="chapter" data-level="15.3" data-path="generalized-linear-modeling-acoustic-space-use-and-proportion-of-bird-species-detections-and-time-since-restoration.html"><a href="generalized-linear-modeling-acoustic-space-use-and-proportion-of-bird-species-detections-and-time-since-restoration.html#getting-data-ready-in-a-format-for-linear-modeling-1"><i class="fa fa-check"></i><b>15.3</b> Getting data ready in a format for linear modeling</a></li>
<li class="chapter" data-level="15.4" data-path="generalized-linear-modeling-acoustic-space-use-and-proportion-of-bird-species-detections-and-time-since-restoration.html"><a href="generalized-linear-modeling-acoustic-space-use-and-proportion-of-bird-species-detections-and-time-since-restoration.html#acoustic-space-use-and-proportion-of-bird-species-detections"><i class="fa fa-check"></i><b>15.4</b> Acoustic space use and proportion of bird species detections</a></li>
<li class="chapter" data-level="15.5" data-path="generalized-linear-modeling-acoustic-space-use-and-proportion-of-bird-species-detections-and-time-since-restoration.html"><a href="generalized-linear-modeling-acoustic-space-use-and-proportion-of-bird-species-detections-and-time-since-restoration.html#year-since-restoration"><i class="fa fa-check"></i><b>15.5</b> Year since restoration</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Source code and supporting information for <em>Using passive acoustic monitoring to examine the impacts of ecological restoration on faunal biodiversity in the Western Ghats</em></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="bird-species-richness" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Section 8</span> Bird Species Richness<a href="bird-species-richness.html#bird-species-richness" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this script, we will calculate:</p>
<ol style="list-style-type: lower-alpha">
<li>Site-wise species richness to understand if species composition across treatment types are distinctly different.</li>
<li>Repeat the above calculations, but using species traits - If a species is a rainforest specialist or an open-country generalist.</li>
</ol>
<div id="install-required-libraries-3" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Install required libraries<a href="bird-species-richness.html#install-required-libraries-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="bird-species-richness.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb32-2"><a href="bird-species-richness.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb32-3"><a href="bird-species-richness.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb32-4"><a href="bird-species-richness.html#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vegan)</span>
<span id="cb32-5"><a href="bird-species-richness.html#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb32-6"><a href="bird-species-richness.html#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scico)</span>
<span id="cb32-7"><a href="bird-species-richness.html#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb32-8"><a href="bird-species-richness.html#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(extrafont)</span>
<span id="cb32-9"><a href="bird-species-richness.html#cb32-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-10"><a href="bird-species-richness.html#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Source any custom/other internal functions necessary for analysis</span></span>
<span id="cb32-11"><a href="bird-species-richness.html#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;code/01_internal-functions.R&quot;</span>)</span></code></pre></div>
</div>
<div id="load-manual-annotations-data" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Load manual annotations data<a href="bird-species-richness.html#load-manual-annotations-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To start with, we will compute species richness from 3 non-consecutive visits for each site for each season. Across two seasons, a total of 6 non-consecutive visits are chosen for each site.</p>
<p>We will use an excel sheet of manual annotations, which contains 10s-clips from each site (A random 16-min was chosen between 6am and 10am and divided into 10s chunks for the ease of annotations).</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="bird-species-richness.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Attach the annotation data for summer and winter</span></span>
<span id="cb33-2"><a href="bird-species-richness.html#cb33-2" aria-hidden="true" tabindex="-1"></a>summer_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/2020-summer-annotation-working-document.csv&quot;</span>)</span>
<span id="cb33-3"><a href="bird-species-richness.html#cb33-3" aria-hidden="true" tabindex="-1"></a>winter_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/2020-winter-annotation-working-document.csv&quot;</span>)</span>
<span id="cb33-4"><a href="bird-species-richness.html#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="bird-species-richness.html#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Please write to the lead author if you would like to access this data (Vijay Ramesh; vr2352@columbia.edu)</span></span>
<span id="cb33-6"><a href="bird-species-richness.html#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="bird-species-richness.html#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co"># combine the datasets for a single dataframe for the present analysis</span></span>
<span id="cb33-8"><a href="bird-species-richness.html#cb33-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(summer_data,winter_data)</span>
<span id="cb33-9"><a href="bird-species-richness.html#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data)</span>
<span id="cb33-10"><a href="bird-species-richness.html#cb33-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-11"><a href="bird-species-richness.html#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="co"># reorder columns</span></span>
<span id="cb33-12"><a href="bird-species-richness.html#cb33-12" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb33-13"><a href="bird-species-richness.html#cb33-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(<span class="fu">c</span>(<span class="st">&quot;BFO&quot;</span>,<span class="st">&quot;SBEO&quot;</span>, <span class="st">&quot;JN&quot;</span>, <span class="st">&quot;AK&quot;</span>, <span class="st">&quot;HSWP&quot;</span>),  <span class="at">.after =</span> <span class="st">&quot;CR&quot;</span>) <span class="co"># certain species codes are mentioned here and these can be found in the supplementary data.</span></span>
<span id="cb33-14"><a href="bird-species-richness.html#cb33-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-15"><a href="bird-species-richness.html#cb33-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Site-wise sorting of the 16-min of data</span></span>
<span id="cb33-16"><a href="bird-species-richness.html#cb33-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-17"><a href="bird-species-richness.html#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Split the file names into 4 columns : Site, Date, Time and Splits  </span></span>
<span id="cb33-18"><a href="bird-species-richness.html#cb33-18" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">separate</span>(data, <span class="at">col =</span> Filename, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;Site&quot;</span>, <span class="st">&quot;Date&quot;</span>, <span class="st">&quot;Time&quot;</span>, <span class="st">&quot;Splits&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span>
<span id="cb33-19"><a href="bird-species-richness.html#cb33-19" aria-hidden="true" tabindex="-1"></a>data</span>
<span id="cb33-20"><a href="bird-species-richness.html#cb33-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-21"><a href="bird-species-richness.html#cb33-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the species-trait-data</span></span>
<span id="cb33-22"><a href="bird-species-richness.html#cb33-22" aria-hidden="true" tabindex="-1"></a>trait_dat <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/species-trait-dat.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="subset-data" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Subset data<a href="bird-species-richness.html#subset-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>How many visits (counted as number of unique days) to a site has been annotated? Please note that some sites have more than 6 visits to a site, and hence we ensure that we choose only 6 non-consecutive visits to a given site.</p>
<p>NOTE: You need to run this only once and if you have already run it, move to the next chunk of code and load datSubset.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="bird-species-richness.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First we remove OLCAP5B - a site for which only 3 visits were made in summer and not sampled as a result of logistic reasons in winter</span></span>
<span id="cb34-2"><a href="bird-species-richness.html#cb34-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb34-3"><a href="bird-species-richness.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(Site, <span class="st">&#39;OLCAP5B&#39;</span>))</span>
<span id="cb34-4"><a href="bird-species-richness.html#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="bird-species-richness.html#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of visits to a particular site</span></span>
<span id="cb34-6"><a href="bird-species-richness.html#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Only INBS04U has 5 visits because another visit was not possible due to rain</span></span>
<span id="cb34-7"><a href="bird-species-richness.html#cb34-7" aria-hidden="true" tabindex="-1"></a>nSites_Days <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb34-8"><a href="bird-species-richness.html#cb34-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Site, Date)<span class="sc">%&gt;%</span></span>
<span id="cb34-9"><a href="bird-species-richness.html#cb34-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Site) <span class="sc">%&gt;%</span> <span class="fu">count</span>(Site)</span>
<span id="cb34-10"><a href="bird-species-richness.html#cb34-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-11"><a href="bird-species-richness.html#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Unique date site combination to give you a sense of sampling</span></span>
<span id="cb34-12"><a href="bird-species-richness.html#cb34-12" aria-hidden="true" tabindex="-1"></a>uniqueSiteDate <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb34-13"><a href="bird-species-richness.html#cb34-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Site) <span class="sc">%&gt;%</span></span>
<span id="cb34-14"><a href="bird-species-richness.html#cb34-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Date)</span>
<span id="cb34-15"><a href="bird-species-richness.html#cb34-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-16"><a href="bird-species-richness.html#cb34-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert date column to YMD format using lubridate::ymd()</span></span>
<span id="cb34-17"><a href="bird-species-richness.html#cb34-17" aria-hidden="true" tabindex="-1"></a>uniqueSiteDate<span class="sc">$</span>Date <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">ymd</span>(uniqueSiteDate<span class="sc">$</span>Date)</span>
<span id="cb34-18"><a href="bird-species-richness.html#cb34-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-19"><a href="bird-species-richness.html#cb34-19" aria-hidden="true" tabindex="-1"></a><span class="co"># The below lines of code were written following a query on stackOverflow to select six non-consecutive visits to any site</span></span>
<span id="cb34-20"><a href="bird-species-richness.html#cb34-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Link: https://stackoverflow.com/questions/67212152/select-non-consecutive-dates-for-every-grouped-element-in-r</span></span>
<span id="cb34-21"><a href="bird-species-richness.html#cb34-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-22"><a href="bird-species-richness.html#cb34-22" aria-hidden="true" tabindex="-1"></a>nonConVisits <span class="ot">&lt;-</span> uniqueSiteDate<span class="sc">%&gt;%</span> </span>
<span id="cb34-23"><a href="bird-species-richness.html#cb34-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb34-24"><a href="bird-species-richness.html#cb34-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_split</span>(Site) <span class="sc">%&gt;%</span> </span>
<span id="cb34-25"><a href="bird-species-richness.html#cb34-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(., <span class="sc">~</span> .x <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb34-26"><a href="bird-species-richness.html#cb34-26" aria-hidden="true" tabindex="-1"></a>           <span class="fu">arrange</span>(Date) <span class="sc">%&gt;%</span></span>
<span id="cb34-27"><a href="bird-species-richness.html#cb34-27" aria-hidden="true" tabindex="-1"></a>           <span class="fu">mutate</span>(<span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-28"><a href="bird-species-richness.html#cb34-28" aria-hidden="true" tabindex="-1"></a>           <span class="fu">complete</span>(<span class="at">Date =</span> <span class="fu">seq.Date</span>(<span class="fu">first</span>(Date), <span class="fu">last</span>(Date), <span class="at">by =</span> <span class="st">&#39;days&#39;</span>))<span class="sc">%&gt;%</span></span>
<span id="cb34-29"><a href="bird-species-richness.html#cb34-29" aria-hidden="true" tabindex="-1"></a>           <span class="fu">group_by</span>(<span class="at">n =</span> <span class="fu">cumsum</span>(<span class="fu">is.na</span>(n))) <span class="sc">%&gt;%</span></span>
<span id="cb34-30"><a href="bird-species-richness.html#cb34-30" aria-hidden="true" tabindex="-1"></a>           <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Site)) <span class="sc">%&gt;%</span></span>
<span id="cb34-31"><a href="bird-species-richness.html#cb34-31" aria-hidden="true" tabindex="-1"></a>           <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-32"><a href="bird-species-richness.html#cb34-32" aria-hidden="true" tabindex="-1"></a>           <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb34-33"><a href="bird-species-richness.html#cb34-33" aria-hidden="true" tabindex="-1"></a>           <span class="fu">sample_n</span>(<span class="fu">min</span>(<span class="fu">n</span>(), <span class="dv">6</span>))</span>
<span id="cb34-34"><a href="bird-species-richness.html#cb34-34" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span></span>
<span id="cb34-35"><a href="bird-species-richness.html#cb34-35" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>n)</span>
<span id="cb34-36"><a href="bird-species-richness.html#cb34-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-37"><a href="bird-species-richness.html#cb34-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Change the structure of the date column back to character for using one of the join functions</span></span>
<span id="cb34-38"><a href="bird-species-richness.html#cb34-38" aria-hidden="true" tabindex="-1"></a>nonConVisits<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">str_remove_all</span>(<span class="fu">as.character</span>(nonConVisits<span class="sc">$</span>Date),<span class="st">&quot;-&quot;</span>)</span>
<span id="cb34-39"><a href="bird-species-richness.html#cb34-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-40"><a href="bird-species-richness.html#cb34-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Left-join with the original dataframe to subset the data for analysis</span></span>
<span id="cb34-41"><a href="bird-species-richness.html#cb34-41" aria-hidden="true" tabindex="-1"></a>datSubset <span class="ot">&lt;-</span> <span class="fu">left_join</span>(nonConVisits,data)</span>
<span id="cb34-42"><a href="bird-species-richness.html#cb34-42" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(datSubset)</span>
<span id="cb34-43"><a href="bird-species-richness.html#cb34-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-44"><a href="bird-species-richness.html#cb34-44" aria-hidden="true" tabindex="-1"></a><span class="co"># renaming columns</span></span>
<span id="cb34-45"><a href="bird-species-richness.html#cb34-45" aria-hidden="true" tabindex="-1"></a>datSubset <span class="ot">&lt;-</span> <span class="fu">rename</span>(datSubset, <span class="at">Restoration.type =</span> Restoration.Type..Benchmark.Active.Passive.)</span>
<span id="cb34-46"><a href="bird-species-richness.html#cb34-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-47"><a href="bird-species-richness.html#cb34-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Save this data as a .csv for future analysis (later scripts)</span></span>
<span id="cb34-48"><a href="bird-species-richness.html#cb34-48" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(datSubset,<span class="st">&quot;results/datSubset.csv&quot;</span>, <span class="at">row.names =</span> F)</span></code></pre></div>
</div>
<div id="total-number-of-detections" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Total number of detections<a href="bird-species-richness.html#total-number-of-detections" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now group the data by site and restoration type and sum the number of detections across sites. We will calculate the overall number of detections for each 10s clip, which will be used to estimate species richness below.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="bird-species-richness.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If you have already processed subsetting of data, read it in directly</span></span>
<span id="cb35-2"><a href="bird-species-richness.html#cb35-2" aria-hidden="true" tabindex="-1"></a>datSubset <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;results/datSubset.csv&quot;</span>)</span>
<span id="cb35-3"><a href="bird-species-richness.html#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="bird-species-richness.html#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the overall number of detections for each site across 6 days of data (translates to ~ 96 min of data per site)</span></span>
<span id="cb35-5"><a href="bird-species-richness.html#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="bird-species-richness.html#cb35-6" aria-hidden="true" tabindex="-1"></a>nDetections_Site <span class="ot">&lt;-</span> datSubset <span class="sc">%&gt;%</span></span>
<span id="cb35-7"><a href="bird-species-richness.html#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Site, Restoration.type) <span class="sc">%&gt;%</span></span>
<span id="cb35-8"><a href="bird-species-richness.html#cb35-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transform</span>() <span class="sc">%&gt;%</span> <span class="fu">replace</span>(<span class="fu">is.na</span>(.), <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-9"><a href="bird-species-richness.html#cb35-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_at</span>(<span class="at">.vars =</span> <span class="fu">vars</span>(<span class="fu">c</span>(<span class="st">&quot;IP&quot;</span><span class="sc">:</span><span class="st">&quot;HSWP&quot;</span>)),<span class="at">.funs =</span> sum) </span></code></pre></div>
</div>
<div id="calculate-species-richness" class="section level2 hasAnchor" number="8.5">
<h2><span class="header-section-number">8.5</span> Calculate species richness<a href="bird-species-richness.html#calculate-species-richness" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Convert the detections to 1, since we are interested in calculating richness per site by converting values &gt;1 to 1 for multiple visits to a site. In other words, we want to establish overall species richness for a 16-min to 48-min window.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="bird-species-richness.html#cb36-1" aria-hidden="true" tabindex="-1"></a>richness <span class="ot">&lt;-</span> nDetections_Site  <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="bird-species-richness.html#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="fu">c</span>(<span class="st">&quot;IP&quot;</span><span class="sc">:</span><span class="st">&quot;HSWP&quot;</span>)),<span class="sc">~</span> <span class="fu">replace</span>(., . <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href="bird-species-richness.html#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb36-4"><a href="bird-species-richness.html#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">richness =</span> <span class="fu">sum</span>(<span class="fu">c_across</span>(IP<span class="sc">:</span>HSWP))) <span class="sc">%&gt;%</span></span>
<span id="cb36-5"><a href="bird-species-richness.html#cb36-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Site, Restoration.type, richness)</span>
<span id="cb36-6"><a href="bird-species-richness.html#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="bird-species-richness.html#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Test if there are significant differences in richness across treatment types</span></span>
<span id="cb36-8"><a href="bird-species-richness.html#cb36-8" aria-hidden="true" tabindex="-1"></a>anovaAll <span class="ot">&lt;-</span> <span class="fu">aov</span>(richness<span class="sc">~</span>Restoration.type, <span class="at">data =</span> richness)</span>
<span id="cb36-9"><a href="bird-species-richness.html#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="bird-species-richness.html#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Tukey test to study each pair of treatment - reveals no signficant difference across treatment types</span></span>
<span id="cb36-11"><a href="bird-species-richness.html#cb36-11" aria-hidden="true" tabindex="-1"></a>tukeyAll <span class="ot">&lt;-</span> <span class="fu">TukeyHSD</span>(anovaAll)</span>
<span id="cb36-12"><a href="bird-species-richness.html#cb36-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-13"><a href="bird-species-richness.html#cb36-13" aria-hidden="true" tabindex="-1"></a><span class="co"># The above result suggests that there are no differences in overall species richness across treatment types</span></span>
<span id="cb36-14"><a href="bird-species-richness.html#cb36-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-15"><a href="bird-species-richness.html#cb36-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a boxplot of species richness by Restoration Type</span></span>
<span id="cb36-16"><a href="bird-species-richness.html#cb36-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-17"><a href="bird-species-richness.html#cb36-17" aria-hidden="true" tabindex="-1"></a><span class="co"># reordering factors for plotting</span></span>
<span id="cb36-18"><a href="bird-species-richness.html#cb36-18" aria-hidden="true" tabindex="-1"></a>richness<span class="sc">$</span>Restoration.type <span class="ot">&lt;-</span> <span class="fu">factor</span>(richness<span class="sc">$</span>Restoration.type, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Benchmark&quot;</span>, <span class="st">&quot;Active&quot;</span>, <span class="st">&quot;Passive&quot;</span>))</span>
<span id="cb36-19"><a href="bird-species-richness.html#cb36-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a custom set of colors</span></span>
<span id="cb36-20"><a href="bird-species-richness.html#cb36-20" aria-hidden="true" tabindex="-1"></a>mycolors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">brewer.pal</span>(<span class="at">name=</span><span class="st">&quot;Dark2&quot;</span>, <span class="at">n =</span> <span class="dv">3</span>), <span class="fu">brewer.pal</span>(<span class="at">name=</span><span class="st">&quot;Paired&quot;</span>, <span class="at">n =</span> <span class="dv">3</span>))</span>
<span id="cb36-21"><a href="bird-species-richness.html#cb36-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-22"><a href="bird-species-richness.html#cb36-22" aria-hidden="true" tabindex="-1"></a>fig_richness <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(richness, <span class="fu">aes</span>(<span class="at">x=</span>Restoration.type, <span class="at">y=</span>richness, <span class="at">fill=</span>Restoration.type)) <span class="sc">+</span>  <span class="fu">geom_boxplot</span>(<span class="at">alpha=</span><span class="fl">0.7</span>) <span class="sc">+</span> </span>
<span id="cb36-23"><a href="bird-species-richness.html#cb36-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="st">&quot;Treatment type&quot;</span>,<span class="at">values=</span>mycolors, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;BM&quot;</span>,<span class="st">&quot;AR&quot;</span>,<span class="st">&quot;NR&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb36-24"><a href="bird-species-richness.html#cb36-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb36-25"><a href="bird-species-richness.html#cb36-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">Treatment Type&quot;</span>, </span>
<span id="cb36-26"><a href="bird-species-richness.html#cb36-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Species Richness</span><span class="sc">\n</span><span class="st">&quot;</span>) <span class="sc">+</span></span>
<span id="cb36-27"><a href="bird-species-richness.html#cb36-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&#39;BM&#39;</span>,<span class="st">&#39;AR&#39;</span>,<span class="st">&#39;NR&#39;</span>)) <span class="sc">+</span></span>
<span id="cb36-28"><a href="bird-species-richness.html#cb36-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb36-29"><a href="bird-species-richness.html#cb36-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb36-30"><a href="bird-species-richness.html#cb36-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">family=</span><span class="st">&quot;Century Gothic&quot;</span>,<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb36-31"><a href="bird-species-richness.html#cb36-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb36-32"><a href="bird-species-richness.html#cb36-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-33"><a href="bird-species-richness.html#cb36-33" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(fig_richness, <span class="at">filename =</span> <span class="st">&quot;figs/fig_richness.png&quot;</span>, <span class="at">width=</span><span class="dv">12</span>, <span class="at">height=</span><span class="dv">7</span>,</span>
<span id="cb36-34"><a href="bird-species-richness.html#cb36-34" aria-hidden="true" tabindex="-1"></a>       <span class="at">device =</span> <span class="fu">png</span>(), <span class="at">units=</span><span class="st">&quot;in&quot;</span>, <span class="at">dpi =</span> <span class="dv">300</span>);<span class="fu">dev.off</span>()</span>
<span id="cb36-35"><a href="bird-species-richness.html#cb36-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-36"><a href="bird-species-richness.html#cb36-36" aria-hidden="true" tabindex="-1"></a><span class="co"># We observe that the overall species richness is relatively higher in passively restored forest patches, followed by benchmark (protected area) forest patches and actively restored forest patches (But these differences are not significant)</span></span></code></pre></div>
<p><img src="figs/fig_richness.png" alt="When we examined the overall species richness across treatment types, we did not observe any significant differences." />
## Species richness by trait</p>
<p>Using species trait data to check if species richness varies by treatment type as a function of whether a species is a rainforest specialist vs.open-country specialist. To do so: Add an additional column of species-trait data and group data based on the same.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="bird-species-richness.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First, we pivot the species-codes and then match the codes with trait_data and reformat the data to keep all detections&gt;0 as 1 else they are 0</span></span>
<span id="cb37-2"><a href="bird-species-richness.html#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="bird-species-richness.html#cb37-3" aria-hidden="true" tabindex="-1"></a>richness_trait <span class="ot">&lt;-</span> nDetections_Site <span class="sc">%&gt;%</span></span>
<span id="cb37-4"><a href="bird-species-richness.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>IP<span class="sc">:</span>HSWP, <span class="at">names_to=</span><span class="st">&quot;Species_Code&quot;</span>, <span class="at">values_to=</span><span class="st">&quot;count&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-5"><a href="bird-species-richness.html#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(.,trait_dat, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;Species_Code&quot;</span><span class="ot">=</span><span class="st">&quot;species_annotation_codes&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb37-6"><a href="bird-species-richness.html#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">forRichness =</span> <span class="fu">case_when</span>(count<span class="sc">&gt;</span><span class="dv">0</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb37-7"><a href="bird-species-richness.html#cb37-7" aria-hidden="true" tabindex="-1"></a>                                 count<span class="sc">==</span><span class="dv">0</span> <span class="sc">~</span> <span class="dv">0</span>))</span>
<span id="cb37-8"><a href="bird-species-richness.html#cb37-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-9"><a href="bird-species-richness.html#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate overall richness for each site as a function of rainforest species and open-country species</span></span>
<span id="cb37-10"><a href="bird-species-richness.html#cb37-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-11"><a href="bird-species-richness.html#cb37-11" aria-hidden="true" tabindex="-1"></a>richness_trait <span class="ot">&lt;-</span>  richness_trait <span class="sc">%&gt;%</span></span>
<span id="cb37-12"><a href="bird-species-richness.html#cb37-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Site, Restoration.type, Species_Code, habitat, forRichness)<span class="sc">%&gt;%</span></span>
<span id="cb37-13"><a href="bird-species-richness.html#cb37-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Site, Restoration.type, habitat) <span class="sc">%&gt;%</span></span>
<span id="cb37-14"><a href="bird-species-richness.html#cb37-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">richness =</span> <span class="fu">sum</span>(forRichness)) <span class="sc">%&gt;%</span></span>
<span id="cb37-15"><a href="bird-species-richness.html#cb37-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()</span>
<span id="cb37-16"><a href="bird-species-richness.html#cb37-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-17"><a href="bird-species-richness.html#cb37-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Let&#39;s subset data for richness as a function of rainforest specialists and open-country generalists and test for significant differences (if any)</span></span>
<span id="cb37-18"><a href="bird-species-richness.html#cb37-18" aria-hidden="true" tabindex="-1"></a>richness_rainforest <span class="ot">&lt;-</span> richness_trait <span class="sc">%&gt;%</span></span>
<span id="cb37-19"><a href="bird-species-richness.html#cb37-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(habitat<span class="sc">==</span><span class="st">&quot;RF&quot;</span>)</span>
<span id="cb37-20"><a href="bird-species-richness.html#cb37-20" aria-hidden="true" tabindex="-1"></a>richness_opencountry <span class="ot">&lt;-</span> richness_trait <span class="sc">%&gt;%</span></span>
<span id="cb37-21"><a href="bird-species-richness.html#cb37-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(habitat<span class="sc">==</span><span class="st">&quot;OC&quot;</span>)</span>
<span id="cb37-22"><a href="bird-species-richness.html#cb37-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-23"><a href="bird-species-richness.html#cb37-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Test if there are significant differences in richness across treatment types as a function of species trait</span></span>
<span id="cb37-24"><a href="bird-species-richness.html#cb37-24" aria-hidden="true" tabindex="-1"></a>anova_rainforest <span class="ot">&lt;-</span> <span class="fu">aov</span>(richness<span class="sc">~</span>Restoration.type, <span class="at">data =</span> richness_rainforest)</span>
<span id="cb37-25"><a href="bird-species-richness.html#cb37-25" aria-hidden="true" tabindex="-1"></a>anova_opencountry <span class="ot">&lt;-</span> <span class="fu">aov</span>(richness<span class="sc">~</span>Restoration.type, <span class="at">data =</span> richness_opencountry)</span>
<span id="cb37-26"><a href="bird-species-richness.html#cb37-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-27"><a href="bird-species-richness.html#cb37-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Tukey test to study each pair of treatment - reveals no signficant difference across treatment types for rainforest birds, but a significant difference between benchmark-active and benchmark-passive sites for open country birds</span></span>
<span id="cb37-28"><a href="bird-species-richness.html#cb37-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-29"><a href="bird-species-richness.html#cb37-29" aria-hidden="true" tabindex="-1"></a>tukey_rainforest <span class="ot">&lt;-</span> <span class="fu">TukeyHSD</span>(anova_rainforest)</span>
<span id="cb37-30"><a href="bird-species-richness.html#cb37-30" aria-hidden="true" tabindex="-1"></a>tukey_opencountry <span class="ot">&lt;-</span> <span class="fu">TukeyHSD</span>(anova_opencountry)</span>
<span id="cb37-31"><a href="bird-species-richness.html#cb37-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-32"><a href="bird-species-richness.html#cb37-32" aria-hidden="true" tabindex="-1"></a><span class="co"># reordering factors for plotting</span></span>
<span id="cb37-33"><a href="bird-species-richness.html#cb37-33" aria-hidden="true" tabindex="-1"></a>richness_trait<span class="sc">$</span>Restoration.type <span class="ot">&lt;-</span> <span class="fu">factor</span>(richness_trait<span class="sc">$</span>Restoration.type, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Benchmark&quot;</span>, <span class="st">&quot;Active&quot;</span>, <span class="st">&quot;Passive&quot;</span>))</span>
<span id="cb37-34"><a href="bird-species-richness.html#cb37-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-35"><a href="bird-species-richness.html#cb37-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the above result</span></span>
<span id="cb37-36"><a href="bird-species-richness.html#cb37-36" aria-hidden="true" tabindex="-1"></a>fig_richness_trait <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(richness_trait, <span class="fu">aes</span>(<span class="at">x=</span>Restoration.type, <span class="at">y=</span>richness, <span class="at">fill=</span>habitat)) <span class="sc">+</span></span>
<span id="cb37-37"><a href="bird-species-richness.html#cb37-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">alpha=</span><span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb37-38"><a href="bird-species-richness.html#cb37-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_scico_d</span>(<span class="at">palette =</span> <span class="st">&quot;roma&quot;</span>,</span>
<span id="cb37-39"><a href="bird-species-richness.html#cb37-39" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Open country&quot;</span>,<span class="st">&quot;Rainforest&quot;</span>)) <span class="sc">+</span></span>
<span id="cb37-40"><a href="bird-species-richness.html#cb37-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb37-41"><a href="bird-species-richness.html#cb37-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">Treatment Type&quot;</span>, </span>
<span id="cb37-42"><a href="bird-species-richness.html#cb37-42" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Species Richness</span><span class="sc">\n</span><span class="st">&quot;</span>) <span class="sc">+</span></span>
<span id="cb37-43"><a href="bird-species-richness.html#cb37-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&#39;BM&#39;</span>,<span class="st">&#39;AR&#39;</span>,<span class="st">&#39;NR&#39;</span>)) <span class="sc">+</span></span>
<span id="cb37-44"><a href="bird-species-richness.html#cb37-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">family=</span><span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb37-45"><a href="bird-species-richness.html#cb37-45" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb37-46"><a href="bird-species-richness.html#cb37-46" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">family=</span><span class="st">&quot;Century Gothic&quot;</span>,<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb37-47"><a href="bird-species-richness.html#cb37-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">family=</span><span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb37-48"><a href="bird-species-richness.html#cb37-48" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb37-49"><a href="bird-species-richness.html#cb37-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">1</span>,<span class="st">&quot;cm&quot;</span>),</span>
<span id="cb37-50"><a href="bird-species-richness.html#cb37-50" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">family=</span><span class="st">&quot;Century Gothic&quot;</span>,<span class="at">size =</span> <span class="dv">14</span>))</span>
<span id="cb37-51"><a href="bird-species-richness.html#cb37-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-52"><a href="bird-species-richness.html#cb37-52" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(fig_richness_trait, <span class="at">filename =</span> <span class="st">&quot;figs/fig_richness_trait.png&quot;</span>, <span class="at">width=</span><span class="dv">12</span>, <span class="at">height=</span><span class="dv">7</span>, <span class="at">device =</span><span class="fu">png</span>(), <span class="at">units=</span><span class="st">&quot;in&quot;</span>, <span class="at">dpi =</span> <span class="dv">300</span>); <span class="fu">dev.off</span>()</span></code></pre></div>
<div class="figure">
<img src="figs/fig_richness_trait.png" alt="" />
<p class="caption">No significant differences were observed for rainforest species across treatment types, but we noticed a significant difference between BM-NR and BM-AR for open-country birds.</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="splitting-large-.wav-files.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="acoustic-detections.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/vjjan91/acoustics-Restoration/edit/master/07_species-richness-birds.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
