<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 4 Acoustic space use | Source code for Using acoustics to assess the impacts of forest restoration on bird communities in the Western Ghats</title>
  <meta name="description" content="Section 4 Acoustic space use | Source code for Using acoustics to assess the impacts of forest restoration on bird communities in the Western Ghats" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 4 Acoustic space use | Source code for Using acoustics to assess the impacts of forest restoration on bird communities in the Western Ghats" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="vjjan91/acoustics-westernGhats" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 4 Acoustic space use | Source code for Using acoustics to assess the impacts of forest restoration on bird communities in the Western Ghats" />
  
  
  

<meta name="author" content="Vijay Ramesh" />
<meta name="author" content="Priyanka HariHaran" />
<meta name="author" content="VA Akshay" />
<meta name="author" content="Pooja Choksi" />
<meta name="author" content="Sarika Khanwilkar" />
<meta name="author" content="VV Robin" />
<meta name="author" content="Ruth DeFries" />


<meta name="date" content="2022-05-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="processing-vegetation-data.html"/>
<link rel="next" href="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#attribution"><i class="fa fa-check"></i><b>1.1</b> Attribution</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#data-access"><i class="fa fa-check"></i><b>1.2</b> Data access</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#data-processing"><i class="fa fa-check"></i><b>1.3</b> Data processing</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#main-text-figure-1"><i class="fa fa-check"></i><b>1.4</b> Main Text Figure 1</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="site-selection.html"><a href="site-selection.html"><i class="fa fa-check"></i><b>2</b> Site selection</a><ul>
<li class="chapter" data-level="2.1" data-path="site-selection.html"><a href="site-selection.html#install-required-libraries"><i class="fa fa-check"></i><b>2.1</b> Install required libraries</a></li>
<li class="chapter" data-level="2.2" data-path="site-selection.html"><a href="site-selection.html#load-list-of-sites"><i class="fa fa-check"></i><b>2.2</b> Load list of sites</a></li>
<li class="chapter" data-level="2.3" data-path="site-selection.html"><a href="site-selection.html#extract-elevation"><i class="fa fa-check"></i><b>2.3</b> Extract elevation</a></li>
<li class="chapter" data-level="2.4" data-path="site-selection.html"><a href="site-selection.html#distance-to-nearest-road"><i class="fa fa-check"></i><b>2.4</b> Distance to nearest road</a></li>
<li class="chapter" data-level="2.5" data-path="site-selection.html"><a href="site-selection.html#distance-between-ar-nr-site-pairs"><i class="fa fa-check"></i><b>2.5</b> Distance between AR-NR site pairs</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="processing-vegetation-data.html"><a href="processing-vegetation-data.html"><i class="fa fa-check"></i><b>3</b> Processing vegetation data</a><ul>
<li class="chapter" data-level="3.1" data-path="processing-vegetation-data.html"><a href="processing-vegetation-data.html#install-required-libraries-1"><i class="fa fa-check"></i><b>3.1</b> Install required libraries</a></li>
<li class="chapter" data-level="3.2" data-path="processing-vegetation-data.html"><a href="processing-vegetation-data.html#load-the-vegetation-data"><i class="fa fa-check"></i><b>3.2</b> Load the vegetation data</a></li>
<li class="chapter" data-level="3.3" data-path="processing-vegetation-data.html"><a href="processing-vegetation-data.html#process-habitat-structure-variables"><i class="fa fa-check"></i><b>3.3</b> Process habitat structure variables</a></li>
<li class="chapter" data-level="3.4" data-path="processing-vegetation-data.html"><a href="processing-vegetation-data.html#principal-component-analysis-of-vegetation-data"><i class="fa fa-check"></i><b>3.4</b> Principal component analysis of vegetation data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="acoustic-space-use.html"><a href="acoustic-space-use.html"><i class="fa fa-check"></i><b>4</b> Acoustic space use</a><ul>
<li class="chapter" data-level="4.1" data-path="acoustic-space-use.html"><a href="acoustic-space-use.html#install-necessary-libraries"><i class="fa fa-check"></i><b>4.1</b> Install necessary libraries</a></li>
<li class="chapter" data-level="4.2" data-path="acoustic-space-use.html"><a href="acoustic-space-use.html#load-recordings-across-multiple-days-and-sites"><i class="fa fa-check"></i><b>4.2</b> Load recordings across multiple days and sites</a></li>
<li class="chapter" data-level="4.3" data-path="acoustic-space-use.html"><a href="acoustic-space-use.html#short-time-discrete-fourier-transform-stdft"><i class="fa fa-check"></i><b>4.3</b> Short-time discrete fourier transform (STDFT)</a></li>
<li class="chapter" data-level="4.4" data-path="acoustic-space-use.html"><a href="acoustic-space-use.html#average-acoustic-space-use"><i class="fa fa-check"></i><b>4.4</b> Average acoustic space use</a></li>
<li class="chapter" data-level="4.5" data-path="acoustic-space-use.html"><a href="acoustic-space-use.html#visual-examination-of-asu"><i class="fa fa-check"></i><b>4.5</b> Visual examination of ASU</a></li>
<li class="chapter" data-level="4.6" data-path="acoustic-space-use.html"><a href="acoustic-space-use.html#representative-figure-for-publication"><i class="fa fa-check"></i><b>4.6</b> Representative figure for publication</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html"><a href="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html"><i class="fa fa-check"></i><b>5</b> Non-metric multidimensional scaling of acoustic space use data</a><ul>
<li class="chapter" data-level="5.1" data-path="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html"><a href="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html#load-necessary-libraries-for-analysis"><i class="fa fa-check"></i><b>5.1</b> Load necessary libraries for analysis</a></li>
<li class="chapter" data-level="5.2" data-path="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html"><a href="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html#load-the-necessary-data-for-nmds-calculations"><i class="fa fa-check"></i><b>5.2</b> Load the necessary data for nmds calculations</a></li>
<li class="chapter" data-level="5.3" data-path="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html"><a href="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html#preparing-a-dataframe-of-space-use-to-run-ordinations"><i class="fa fa-check"></i><b>5.3</b> Preparing a dataframe of space use to run ordinations</a></li>
<li class="chapter" data-level="5.4" data-path="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html"><a href="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html#plotting-the-nmds-scores"><i class="fa fa-check"></i><b>5.4</b> Plotting the NMDS scores</a></li>
<li class="chapter" data-level="5.5" data-path="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html"><a href="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html#testing-multivariate-homogeneity-of-group-dispersions"><i class="fa fa-check"></i><b>5.5</b> Testing multivariate homogeneity of group dispersions</a></li>
<li class="chapter" data-level="5.6" data-path="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html"><a href="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html#visualizing-the-multivariate-homogeneity-of-group-dispersions"><i class="fa fa-check"></i><b>5.6</b> Visualizing the multivariate homogeneity of group dispersions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html"><a href="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html"><i class="fa fa-check"></i><b>6</b> Generalized linear mixed modeling (acoustic space use and vegetation data)</a><ul>
<li class="chapter" data-level="6.1" data-path="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html"><a href="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html#install-required-libraries-2"><i class="fa fa-check"></i><b>6.1</b> Install required libraries</a></li>
<li class="chapter" data-level="6.2" data-path="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html"><a href="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html#load-necessary-data-for-statistical-modeling"><i class="fa fa-check"></i><b>6.2</b> Load necessary data for statistical modeling</a></li>
<li class="chapter" data-level="6.3" data-path="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html"><a href="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html#getting-data-ready-in-a-format-for-linear-modeling"><i class="fa fa-check"></i><b>6.3</b> Getting data ready in a format for linear modeling</a></li>
<li class="chapter" data-level="6.4" data-path="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html"><a href="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html#running-the-generalized-linear-mixed-models"><i class="fa fa-check"></i><b>6.4</b> Running the generalized linear mixed models</a></li>
<li class="chapter" data-level="6.5" data-path="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html"><a href="generalized-linear-mixed-modeling-acoustic-space-use-and-vegetation-data.html#creating-figure-for-publication"><i class="fa fa-check"></i><b>6.5</b> Creating figure for publication</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="splitting-large-.wav-files.html"><a href="splitting-large-.wav-files.html"><i class="fa fa-check"></i><b>7</b> Splitting large .wav files</a><ul>
<li class="chapter" data-level="7.1" data-path="splitting-large-.wav-files.html"><a href="splitting-large-.wav-files.html#load-required-libraries"><i class="fa fa-check"></i><b>7.1</b> Load required libraries</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="selecting-the-dawn-chorus.html"><a href="selecting-the-dawn-chorus.html"><i class="fa fa-check"></i><b>8</b> Selecting the dawn chorus</a><ul>
<li class="chapter" data-level="8.1" data-path="selecting-the-dawn-chorus.html"><a href="selecting-the-dawn-chorus.html#split-the-files"><i class="fa fa-check"></i><b>8.1</b> Split the files</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="bird-species-richness.html"><a href="bird-species-richness.html"><i class="fa fa-check"></i><b>9</b> Bird Species Richness</a><ul>
<li class="chapter" data-level="9.1" data-path="bird-species-richness.html"><a href="bird-species-richness.html#install-required-libraries-3"><i class="fa fa-check"></i><b>9.1</b> Install required libraries</a></li>
<li class="chapter" data-level="9.2" data-path="bird-species-richness.html"><a href="bird-species-richness.html#load-manual-annotations-data"><i class="fa fa-check"></i><b>9.2</b> Load manual annotations data</a></li>
<li class="chapter" data-level="9.3" data-path="bird-species-richness.html"><a href="bird-species-richness.html#subset-data"><i class="fa fa-check"></i><b>9.3</b> Subset data</a></li>
<li class="chapter" data-level="9.4" data-path="bird-species-richness.html"><a href="bird-species-richness.html#total-number-of-detections"><i class="fa fa-check"></i><b>9.4</b> Total number of detections</a></li>
<li class="chapter" data-level="9.5" data-path="bird-species-richness.html"><a href="bird-species-richness.html#calculate-species-richness"><i class="fa fa-check"></i><b>9.5</b> Calculate species richness</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="acoustic-detections.html"><a href="acoustic-detections.html"><i class="fa fa-check"></i><b>10</b> Acoustic Detections</a><ul>
<li class="chapter" data-level="10.1" data-path="acoustic-detections.html"><a href="acoustic-detections.html#install-required-libraries-4"><i class="fa fa-check"></i><b>10.1</b> Install required libraries</a></li>
<li class="chapter" data-level="10.2" data-path="acoustic-detections.html"><a href="acoustic-detections.html#load-data"><i class="fa fa-check"></i><b>10.2</b> Load data</a></li>
<li class="chapter" data-level="10.3" data-path="acoustic-detections.html"><a href="acoustic-detections.html#overall-number-of-detections"><i class="fa fa-check"></i><b>10.3</b> Overall number of detections</a></li>
<li class="chapter" data-level="10.4" data-path="acoustic-detections.html"><a href="acoustic-detections.html#detections-by-treatment-type"><i class="fa fa-check"></i><b>10.4</b> Detections by treatment type</a></li>
<li class="chapter" data-level="10.5" data-path="acoustic-detections.html"><a href="acoustic-detections.html#detections-by-species-traits"><i class="fa fa-check"></i><b>10.5</b> Detections by species traits</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="jackknife-estimates.html"><a href="jackknife-estimates.html"><i class="fa fa-check"></i><b>11</b> Jackknife estimates</a><ul>
<li class="chapter" data-level="11.1" data-path="jackknife-estimates.html"><a href="jackknife-estimates.html#install-required-libraries-5"><i class="fa fa-check"></i><b>11.1</b> Install required libraries</a></li>
<li class="chapter" data-level="11.2" data-path="jackknife-estimates.html"><a href="jackknife-estimates.html#load-the-necessary-data-to-calculate-jackknife-scores"><i class="fa fa-check"></i><b>11.2</b> Load the necessary data to calculate Jackknife scores</a></li>
<li class="chapter" data-level="11.3" data-path="jackknife-estimates.html"><a href="jackknife-estimates.html#preparing-dataframe-to-extract-jacknife-scores"><i class="fa fa-check"></i><b>11.3</b> Preparing dataframe to extract jacknife scores</a></li>
<li class="chapter" data-level="11.4" data-path="jackknife-estimates.html"><a href="jackknife-estimates.html#save-scores-locally"><i class="fa fa-check"></i><b>11.4</b> Save scores locally</a></li>
<li class="chapter" data-level="11.5" data-path="jackknife-estimates.html"><a href="jackknife-estimates.html#looking-at-correlations-between-jacknife-scores-and-bootstrap-estimates"><i class="fa fa-check"></i><b>11.5</b> Looking at correlations between jacknife scores and bootstrap estimates</a></li>
<li class="chapter" data-level="11.6" data-path="jackknife-estimates.html"><a href="jackknife-estimates.html#testing-for-differences-between-treatment-types"><i class="fa fa-check"></i><b>11.6</b> Testing for differences between treatment types</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="non-metric-multidimensional-scaling.html"><a href="non-metric-multidimensional-scaling.html"><i class="fa fa-check"></i><b>12</b> Non-metric multidimensional scaling</a><ul>
<li class="chapter" data-level="12.1" data-path="non-metric-multidimensional-scaling.html"><a href="non-metric-multidimensional-scaling.html#install-required-libraries-6"><i class="fa fa-check"></i><b>12.1</b> Install required libraries</a></li>
<li class="chapter" data-level="12.2" data-path="non-metric-multidimensional-scaling.html"><a href="non-metric-multidimensional-scaling.html#load-the-necessary-data-for-nmds-calculations-1"><i class="fa fa-check"></i><b>12.2</b> Load the necessary data for NMDS calculations</a></li>
<li class="chapter" data-level="12.3" data-path="non-metric-multidimensional-scaling.html"><a href="non-metric-multidimensional-scaling.html#preparing-dataframe-of-traits-and-species-to-be-used-for-nmds-later-on"><i class="fa fa-check"></i><b>12.3</b> Preparing dataframe of traits and species to be used for NMDS later on</a></li>
<li class="chapter" data-level="12.4" data-path="non-metric-multidimensional-scaling.html"><a href="non-metric-multidimensional-scaling.html#preparing-a-dataframe-of-detections-to-run-ordinations"><i class="fa fa-check"></i><b>12.4</b> Preparing a dataframe of detections to run ordinations</a></li>
<li class="chapter" data-level="12.5" data-path="non-metric-multidimensional-scaling.html"><a href="non-metric-multidimensional-scaling.html#bray-curtis-dissimilarity-index"><i class="fa fa-check"></i><b>12.5</b> Bray-Curtis dissimilarity index</a></li>
<li class="chapter" data-level="12.6" data-path="non-metric-multidimensional-scaling.html"><a href="non-metric-multidimensional-scaling.html#plotting-the-nmds-scores-1"><i class="fa fa-check"></i><b>12.6</b> Plotting the NMDS scores</a></li>
<li class="chapter" data-level="12.7" data-path="non-metric-multidimensional-scaling.html"><a href="non-metric-multidimensional-scaling.html#main-text-figure-2"><i class="fa fa-check"></i><b>12.7</b> Main text Figure 2</a></li>
<li class="chapter" data-level="12.8" data-path="non-metric-multidimensional-scaling.html"><a href="non-metric-multidimensional-scaling.html#testing-multivariate-homogeneity-of-group-dispersions-1"><i class="fa fa-check"></i><b>12.8</b> Testing multivariate homogeneity of group dispersions</a></li>
<li class="chapter" data-level="12.9" data-path="non-metric-multidimensional-scaling.html"><a href="non-metric-multidimensional-scaling.html#testing-compositional-dissimilarity-between-groups"><i class="fa fa-check"></i><b>12.9</b> Testing compositional dissimilarity between groups</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><i class="fa fa-check"></i><b>13</b> Generalized linear mixed modeling (species richness, vegetation data and planting year)</a><ul>
<li class="chapter" data-level="13.1" data-path="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html#install-required-libraries-7"><i class="fa fa-check"></i><b>13.1</b> Install required libraries</a></li>
<li class="chapter" data-level="13.2" data-path="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html#load-the-necessary-data-for-statistical-modeling"><i class="fa fa-check"></i><b>13.2</b> Load the necessary data for statistical modeling</a></li>
<li class="chapter" data-level="13.3" data-path="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html#getting-data-ready-in-a-format-for-generalized-linear-modeling"><i class="fa fa-check"></i><b>13.3</b> Getting data ready in a format for generalized linear modeling</a></li>
<li class="chapter" data-level="13.4" data-path="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html#getting-data-ready-for-generalized-linear-mixed-modeling-with-richness-data-as-well-as-visits."><i class="fa fa-check"></i><b>13.4</b> Getting data ready for generalized linear mixed modeling with richness data as well as visits.</a></li>
<li class="chapter" data-level="13.5" data-path="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html#running-the-generalized-linear-mixed-models-1"><i class="fa fa-check"></i><b>13.5</b> Running the generalized linear mixed models</a></li>
<li class="chapter" data-level="13.6" data-path="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html#testing-the-role-of-habitat"><i class="fa fa-check"></i><b>13.6</b> Testing the role of habitat</a></li>
<li class="chapter" data-level="13.7" data-path="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html"><a href="generalized-linear-mixed-modeling-species-richness-vegetation-data-and-planting-year.html#effect-of-planting-year"><i class="fa fa-check"></i><b>13.7</b> Effect of planting year</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="generalized-linear-modeling-acoustic-space-use-and-bird-species-richness-and-time-since-restoration.html"><a href="generalized-linear-modeling-acoustic-space-use-and-bird-species-richness-and-time-since-restoration.html"><i class="fa fa-check"></i><b>14</b> Generalized linear modeling (acoustic space use and bird species richness, and time since restoration)</a><ul>
<li class="chapter" data-level="14.1" data-path="generalized-linear-modeling-acoustic-space-use-and-bird-species-richness-and-time-since-restoration.html"><a href="generalized-linear-modeling-acoustic-space-use-and-bird-species-richness-and-time-since-restoration.html#install-required-libraries-8"><i class="fa fa-check"></i><b>14.1</b> Install required libraries</a></li>
<li class="chapter" data-level="14.2" data-path="generalized-linear-modeling-acoustic-space-use-and-bird-species-richness-and-time-since-restoration.html"><a href="generalized-linear-modeling-acoustic-space-use-and-bird-species-richness-and-time-since-restoration.html#load-necessary-data-for-statistical-modeling-1"><i class="fa fa-check"></i><b>14.2</b> Load necessary data for statistical modeling</a></li>
<li class="chapter" data-level="14.3" data-path="generalized-linear-modeling-acoustic-space-use-and-bird-species-richness-and-time-since-restoration.html"><a href="generalized-linear-modeling-acoustic-space-use-and-bird-species-richness-and-time-since-restoration.html#getting-data-ready-in-a-format-for-linear-modeling-1"><i class="fa fa-check"></i><b>14.3</b> Getting data ready in a format for linear modeling</a></li>
<li class="chapter" data-level="14.4" data-path="generalized-linear-modeling-acoustic-space-use-and-bird-species-richness-and-time-since-restoration.html"><a href="generalized-linear-modeling-acoustic-space-use-and-bird-species-richness-and-time-since-restoration.html#bird-species-richness-1"><i class="fa fa-check"></i><b>14.4</b> Bird species richness</a></li>
<li class="chapter" data-level="14.5" data-path="generalized-linear-modeling-acoustic-space-use-and-bird-species-richness-and-time-since-restoration.html"><a href="generalized-linear-modeling-acoustic-space-use-and-bird-species-richness-and-time-since-restoration.html#year-since-restoration"><i class="fa fa-check"></i><b>14.5</b> Year since restoration</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Source code for <em>Using acoustics to assess the impacts of forest restoration on bird communities in the Western Ghats</em></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="acoustic-space-use" class="section level1">
<h1><span class="header-section-number">Section 4</span> Acoustic space use</h1>
<p>In this study, acoustic space use reflects the amount and pattern of vocalizations within each frequency bin for a given time period.</p>
<p>Previous papers calculated acoustic space use by ascertaining the proportion of recordings in a particular time and frequency bin that is above a certain amplitude. However, this proportion was estimated by counting the number of frequency peaks within a given recording (seewave::fpeaks()) and then scaling it to go from 0 to 1. In our analysis, we want to obtain an understanding of the overall acoustic activity for a given time and frequency bin. In other words, we want the area under the curve for a particular frequency contour.</p>
<p><em>Note</em> From Sound Analysis and Synthesis with R by Jerome Sueur</p>
<p>The basic premise in calculating ASU is that we compute a Short-time discrete fourier transform for a given frequency bin size (obtained by dividing the sampling frequency/window length over which the fourier transform is computed, for example 48000Hz/256 = 187.5 is the bin size). However, the size of the frequency bin is inversely proportional to time (Uncertainty principle; Pg.312) which would mean a bin size of 187.5 corresponds to a time duration of 0.005s (1/187.5=0.005s). Ultimately what matters is a compromise between frequency resolution and temporal resolution (Fig 11.3; Pg. 313).</p>
<div id="install-necessary-libraries" class="section level2">
<h2><span class="header-section-number">4.1</span> Install necessary libraries</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb10-1"><a href="acoustic-space-use.html#cb10-1"></a><span class="kw">library</span>(seewave)</span>
<span id="cb10-2"><a href="acoustic-space-use.html#cb10-2"></a><span class="kw">library</span>(warbleR)</span>
<span id="cb10-3"><a href="acoustic-space-use.html#cb10-3"></a><span class="kw">library</span>(tuneR)</span>
<span id="cb10-4"><a href="acoustic-space-use.html#cb10-4"></a><span class="kw">library</span>(stringi)</span>
<span id="cb10-5"><a href="acoustic-space-use.html#cb10-5"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb10-6"><a href="acoustic-space-use.html#cb10-6"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb10-7"><a href="acoustic-space-use.html#cb10-7"></a><span class="kw">library</span>(RColorBrewer)</span>
<span id="cb10-8"><a href="acoustic-space-use.html#cb10-8"></a><span class="kw">library</span>(foreach)</span>
<span id="cb10-9"><a href="acoustic-space-use.html#cb10-9"></a><span class="kw">library</span>(doSNOW)</span>
<span id="cb10-10"><a href="acoustic-space-use.html#cb10-10"></a><span class="kw">library</span>(rlist)</span>
<span id="cb10-11"><a href="acoustic-space-use.html#cb10-11"></a><span class="kw">library</span>(tictoc)</span>
<span id="cb10-12"><a href="acoustic-space-use.html#cb10-12"></a><span class="kw">library</span>(patchwork)</span>
<span id="cb10-13"><a href="acoustic-space-use.html#cb10-13"></a></span>
<span id="cb10-14"><a href="acoustic-space-use.html#cb10-14"></a><span class="co"># Source any custom/other internal functions necessary for analysis</span></span>
<span id="cb10-15"><a href="acoustic-space-use.html#cb10-15"></a><span class="kw">source</span>(<span class="st">&quot;code/01_internal-functions.R&quot;</span>)</span></code></pre></div>
<p>Below, we have summarized approaches taken by previous studies:</p>
<p>Aide et al. 2017 aggregated recordings at time scale of hour of day and used a frequency bin size of 86.13 Hz and an amplitude filtering threshold of 0.02. So if the sampling rate is 22000 Hz, that would mean - 22000/86.13 ~ 256 frequency bins to divide up the frequency space. In this paper, there would be 24hr*256 bins = 6144 time/frequency bins.</p>
<p>Campos-Cerqueira et al. 2019 aggregated recordings at the time scale of hour of day (24 h), used a frequency bin size of 172 Hz, and an amplitude filtering threshold of 0.003. So if the sampling rate is 22000 Hz, that would mean - 22000/172 ~ 128 frequency bins. This resulted in a three‐dimensional (x = hour, y = acoustic frequency, z = proportion of all recordings in each time/frequency bin with a frequency peak value &gt; 0.003 amplitude) matrix of acoustic activity with a total of 3,072 time/frequency bins (24 h × 128 frequency bins).</p>
<p>Campos-Cerqueira and Aide 2017 used the meanspec (f = 44,100, wl = 256, wn = “hanning”) and fpeaks (threshold = 0.1, freq = 172) function from the seewave package in R (Sueur et al., 2008a). The value of each peak was normalized using the maximum amplitude value within all recordings in the soundscape (i.e., site), and thus values ranged from 0 to 1. The number of frequency peaks was determined by counting the number of recordings with a peak within each of the 128 frequency bins that were equal or greater than the amplitude threshold. To control for the different number of recordings in each site and each time interval (i.e., hour), we divided the number of recordings with a peak in each time/frequency class by the total number of recordings collected during each hourly interval.</p>
</div>
<div id="load-recordings-across-multiple-days-and-sites" class="section level2">
<h2><span class="header-section-number">4.2</span> Load recordings across multiple days and sites</h2>
<p>First, we examined all unique sites and dates for which we had a continuous 24 hours of recordings.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb11-1"><a href="acoustic-space-use.html#cb11-1"></a><span class="co"># List the path that contains all folders, which contain the audiomoth data</span></span>
<span id="cb11-2"><a href="acoustic-space-use.html#cb11-2"></a>path &lt;-<span class="st"> &quot;D:</span><span class="ch">\\</span><span class="st">2020-summer</span><span class="ch">\\</span><span class="st">&quot;</span> <span class="co"># change the path depending on where the raw data is</span></span>
<span id="cb11-3"><a href="acoustic-space-use.html#cb11-3"></a></span>
<span id="cb11-4"><a href="acoustic-space-use.html#cb11-4"></a><span class="co"># Listing the folders within which .WAV files are stored</span></span>
<span id="cb11-5"><a href="acoustic-space-use.html#cb11-5"></a>folders &lt;-<span class="st"> </span><span class="kw">dir</span>(path, <span class="dt">recursive=</span>F,<span class="dt">full.names=</span>T)</span>
<span id="cb11-6"><a href="acoustic-space-use.html#cb11-6"></a></span>
<span id="cb11-7"><a href="acoustic-space-use.html#cb11-7"></a><span class="co">###### Please note ######</span></span>
<span id="cb11-8"><a href="acoustic-space-use.html#cb11-8"></a></span>
<span id="cb11-9"><a href="acoustic-space-use.html#cb11-9"></a><span class="co"># The below set of lines need to be run only once for a given set of sites and days. </span></span>
<span id="cb11-10"><a href="acoustic-space-use.html#cb11-10"></a><span class="co"># Let&#39;s first rename the files by name of each site (as prefix)</span></span>
<span id="cb11-11"><a href="acoustic-space-use.html#cb11-11"></a></span>
<span id="cb11-12"><a href="acoustic-space-use.html#cb11-12"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(folders)){</span>
<span id="cb11-13"><a href="acoustic-space-use.html#cb11-13"></a></span>
<span id="cb11-14"><a href="acoustic-space-use.html#cb11-14"></a><span class="kw">setwd</span>(folders[i])</span>
<span id="cb11-15"><a href="acoustic-space-use.html#cb11-15"></a>  </span>
<span id="cb11-16"><a href="acoustic-space-use.html#cb11-16"></a><span class="co"># List the files within each folder and renaming the files with the prefix - SITE_ID</span></span>
<span id="cb11-17"><a href="acoustic-space-use.html#cb11-17"></a>a &lt;-<span class="st"> </span><span class="kw">list.files</span>(<span class="kw">paste0</span>(path,<span class="kw">basename</span>(folders)[i],<span class="st">&quot;</span><span class="ch">\\</span><span class="st">&quot;</span>), <span class="dt">full.names =</span> T)</span>
<span id="cb11-18"><a href="acoustic-space-use.html#cb11-18"></a><span class="kw">file.rename</span>(<span class="dt">from =</span> a, <span class="dt">to=</span><span class="kw">paste0</span>(<span class="kw">basename</span>(folders)[i],<span class="st">&quot;_&quot;</span>,<span class="kw">basename</span>(a)))</span>
<span id="cb11-19"><a href="acoustic-space-use.html#cb11-19"></a>}</span>
<span id="cb11-20"><a href="acoustic-space-use.html#cb11-20"></a></span>
<span id="cb11-21"><a href="acoustic-space-use.html#cb11-21"></a><span class="co">###### Ending note here ######</span></span>
<span id="cb11-22"><a href="acoustic-space-use.html#cb11-22"></a></span>
<span id="cb11-23"><a href="acoustic-space-use.html#cb11-23"></a><span class="co"># Now get only those files for a full 24 hours across every unique site</span></span>
<span id="cb11-24"><a href="acoustic-space-use.html#cb11-24"></a>files &lt;-<span class="st"> </span><span class="kw">list</span>()</span>
<span id="cb11-25"><a href="acoustic-space-use.html#cb11-25"></a></span>
<span id="cb11-26"><a href="acoustic-space-use.html#cb11-26"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(folders)){</span>
<span id="cb11-27"><a href="acoustic-space-use.html#cb11-27"></a></span>
<span id="cb11-28"><a href="acoustic-space-use.html#cb11-28"></a>a &lt;-<span class="st"> </span><span class="kw">list.files</span>(<span class="kw">paste0</span>(path,<span class="kw">basename</span>(folders)[i],<span class="st">&quot;</span><span class="ch">\\</span><span class="st">&quot;</span>), <span class="dt">full.names =</span> T)</span>
<span id="cb11-29"><a href="acoustic-space-use.html#cb11-29"></a>site_date &lt;-<span class="st"> </span><span class="kw">str_extract</span>(<span class="kw">basename</span>(a),<span class="st">&#39;</span><span class="ch">\\</span><span class="st">w+_</span><span class="ch">\\</span><span class="st">d+_&#39;</span>)</span>
<span id="cb11-30"><a href="acoustic-space-use.html#cb11-30"></a></span>
<span id="cb11-31"><a href="acoustic-space-use.html#cb11-31"></a><span class="co"># Choosing all 24 hours of data across every unique site (288 corresponds to 12 files every 1 hour)</span></span>
<span id="cb11-32"><a href="acoustic-space-use.html#cb11-32"></a>  <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(<span class="kw">unique</span>(site_date))){</span>
<span id="cb11-33"><a href="acoustic-space-use.html#cb11-33"></a>    dat &lt;-<span class="st"> </span>a[<span class="kw">str_detect</span>(a,<span class="kw">unique</span>(site_date)[j])]</span>
<span id="cb11-34"><a href="acoustic-space-use.html#cb11-34"></a>    <span class="cf">if</span>((<span class="kw">length</span>(dat)<span class="op">&lt;</span><span class="dv">288</span>)<span class="op">==</span><span class="ot">TRUE</span>){</span>
<span id="cb11-35"><a href="acoustic-space-use.html#cb11-35"></a>      <span class="cf">next</span></span>
<span id="cb11-36"><a href="acoustic-space-use.html#cb11-36"></a>    } <span class="cf">else</span> {</span>
<span id="cb11-37"><a href="acoustic-space-use.html#cb11-37"></a>      files &lt;-<span class="st"> </span><span class="kw">c</span>(files, dat) </span>
<span id="cb11-38"><a href="acoustic-space-use.html#cb11-38"></a>    }</span>
<span id="cb11-39"><a href="acoustic-space-use.html#cb11-39"></a>  }</span>
<span id="cb11-40"><a href="acoustic-space-use.html#cb11-40"></a>}</span>
<span id="cb11-41"><a href="acoustic-space-use.html#cb11-41"></a></span>
<span id="cb11-42"><a href="acoustic-space-use.html#cb11-42"></a>files &lt;-<span class="st"> </span><span class="kw">unlist</span>(files)</span></code></pre></div>
</div>
<div id="short-time-discrete-fourier-transform-stdft" class="section level2">
<h2><span class="header-section-number">4.3</span> Short-time discrete fourier transform (STDFT)</h2>
<p>To compute an STDFT, we shall begin with an audio recording that has a sampling rate of s = 48,000 Hz and a window length (for the STDFT) wl = 256 samples, which results in a frequency bin size of z = 187.5 Hz (where z = s/wl). Given the sampling rate s, our Nyquist frequency f = 24,000 Hz (where f = s/2), and therefore, the total number of frequency bins across which an STDFT was run is n = 128 frequency bins (n = f/z). The final output of an STDFT corresponds to a matrix of N * m fourier coefficients (N = length of the audio recording and m = number of frequency bins). In this study, we computed STDFT across 24 hours of audio recordings, which translates to a matrix of 3072 (24 hours * 128 bins) fourier coefficients (Campos-Cerqueira et al. 2019). This matrix of coefficients essentially corresponds to ASU (or a measure of space ‘used, for every hour of a day across the 128 bins in this study). Prior to computing STDFTs and ASU values, we set a threshold amplitude of 0.003 dB for audio recordings (following Campos-Cerqueira et al. 2019 and examination of our data).</p>
<p>To calculate ASU, we selected five consecutive days of acoustic data (24 continuous hours of data) across each site. Five days was the minimum number of days of consecutive sampling without disruptions across sites (eg. memory card switching/battery replacements/failure of equipment etc.).</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb12-1"><a href="acoustic-space-use.html#cb12-1"></a><span class="co"># Select all unique site_date combinations for each unique site</span></span>
<span id="cb12-2"><a href="acoustic-space-use.html#cb12-2"></a>site_date &lt;-<span class="st"> </span><span class="kw">str_extract</span>(<span class="kw">basename</span>(files),<span class="st">&#39;</span><span class="ch">\\</span><span class="st">w+_</span><span class="ch">\\</span><span class="st">d+_&#39;</span>)</span>
<span id="cb12-3"><a href="acoustic-space-use.html#cb12-3"></a><span class="kw">unique</span>(site_date)</span>
<span id="cb12-4"><a href="acoustic-space-use.html#cb12-4"></a></span>
<span id="cb12-5"><a href="acoustic-space-use.html#cb12-5"></a><span class="co"># The only step that involves sub-selection (Selecting 5 days across each site; Note: IPTO06R has 3 days sampled and OLV110R has only 2 days sampled)</span></span>
<span id="cb12-6"><a href="acoustic-space-use.html#cb12-6"></a>site_date &lt;-<span class="st"> </span><span class="kw">unique</span>(site_date)[<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,<span class="dv">10</span><span class="op">:</span><span class="dv">14</span>,<span class="dv">19</span><span class="op">:</span><span class="dv">23</span>,<span class="dv">28</span><span class="op">:</span><span class="dv">47</span>,<span class="dv">52</span><span class="op">:</span><span class="dv">61</span>,<span class="dv">71</span><span class="op">:</span><span class="dv">75</span>,</span>
<span id="cb12-7"><a href="acoustic-space-use.html#cb12-7"></a>                             <span class="dv">86</span><span class="op">:</span><span class="dv">90</span>,<span class="dv">97</span><span class="op">:</span><span class="dv">101</span>,<span class="dv">107</span><span class="op">:</span><span class="dv">111</span>,<span class="dv">118</span><span class="op">:</span><span class="dv">122</span>,<span class="dv">130</span><span class="op">:</span><span class="dv">134</span>,</span>
<span id="cb12-8"><a href="acoustic-space-use.html#cb12-8"></a>                             <span class="dv">141</span><span class="op">:</span><span class="dv">143</span>,<span class="dv">150</span><span class="op">:</span><span class="dv">154</span>,<span class="dv">161</span><span class="op">:</span><span class="dv">165</span>,<span class="dv">173</span><span class="op">:</span><span class="dv">177</span>,<span class="dv">188</span><span class="op">:</span><span class="dv">189</span>,</span>
<span id="cb12-9"><a href="acoustic-space-use.html#cb12-9"></a>                             <span class="dv">193</span><span class="op">:</span><span class="dv">197</span>,<span class="dv">202</span><span class="op">:</span><span class="dv">206</span>,<span class="dv">211</span><span class="op">:</span><span class="dv">215</span>,<span class="dv">219</span><span class="op">:</span><span class="dv">223</span>,<span class="dv">225</span><span class="op">:</span><span class="dv">229</span>,</span>
<span id="cb12-10"><a href="acoustic-space-use.html#cb12-10"></a>                             <span class="dv">231</span><span class="op">:</span><span class="dv">235</span>,<span class="dv">237</span><span class="op">:</span><span class="dv">241</span>,<span class="dv">249</span><span class="op">:</span><span class="dv">253</span>,<span class="dv">261</span><span class="op">:</span><span class="dv">265</span>,<span class="dv">269</span><span class="op">:</span><span class="dv">273</span>,</span>
<span id="cb12-11"><a href="acoustic-space-use.html#cb12-11"></a>                             <span class="dv">281</span><span class="op">:</span><span class="dv">285</span>,<span class="dv">289</span><span class="op">:</span><span class="dv">293</span>,<span class="dv">300</span><span class="op">:</span><span class="dv">304</span>,<span class="dv">309</span><span class="op">:</span><span class="dv">313</span>,<span class="dv">319</span><span class="op">:</span><span class="dv">323</span>,</span>
<span id="cb12-12"><a href="acoustic-space-use.html#cb12-12"></a>                             <span class="dv">329</span><span class="op">:</span><span class="dv">333</span>,<span class="dv">340</span><span class="op">:</span><span class="dv">344</span>,<span class="dv">351</span><span class="op">:</span><span class="dv">355</span>,<span class="dv">361</span><span class="op">:</span><span class="dv">365</span>,<span class="dv">370</span><span class="op">:</span><span class="dv">374</span>,</span>
<span id="cb12-13"><a href="acoustic-space-use.html#cb12-13"></a>                             <span class="dv">378</span><span class="op">:</span><span class="dv">382</span>,<span class="dv">387</span><span class="op">:</span><span class="dv">391</span>,<span class="dv">396</span><span class="op">:</span><span class="dv">400</span>)]</span>
<span id="cb12-14"><a href="acoustic-space-use.html#cb12-14"></a></span>
<span id="cb12-15"><a href="acoustic-space-use.html#cb12-15"></a><span class="co"># Create a sequence of numbers to combine files by 1 hour</span></span>
<span id="cb12-16"><a href="acoustic-space-use.html#cb12-16"></a>hour_seq &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from=</span><span class="dv">0</span>,<span class="dt">to=</span><span class="dv">288</span>, <span class="dt">by=</span><span class="dv">12</span>)</span>
<span id="cb12-17"><a href="acoustic-space-use.html#cb12-17"></a></span>
<span id="cb12-18"><a href="acoustic-space-use.html#cb12-18"></a><span class="co"># To name files with a suffix for each hour</span></span>
<span id="cb12-19"><a href="acoustic-space-use.html#cb12-19"></a>time_of_day &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;00:00-01:00&quot;</span>,<span class="st">&quot;01:00-02:00&quot;</span>,<span class="st">&quot;02:00-03:00&quot;</span>,<span class="st">&quot;03:00-04:00&quot;</span>,</span>
<span id="cb12-20"><a href="acoustic-space-use.html#cb12-20"></a>                 <span class="st">&quot;04:00-05:00&quot;</span>,<span class="st">&quot;05:00-06:00&quot;</span>,<span class="st">&quot;06:00-07:00&quot;</span>,<span class="st">&quot;07:00-08:00&quot;</span>,</span>
<span id="cb12-21"><a href="acoustic-space-use.html#cb12-21"></a>                 <span class="st">&quot;08:00-09:00&quot;</span>,<span class="st">&quot;09:00-10:00&quot;</span>,<span class="st">&quot;10:00-11:00&quot;</span>,<span class="st">&quot;11:00-12:00&quot;</span>,</span>
<span id="cb12-22"><a href="acoustic-space-use.html#cb12-22"></a>                 <span class="st">&quot;12:00-13:00&quot;</span>,<span class="st">&quot;13:00-14:00&quot;</span>,<span class="st">&quot;14:00-15:00&quot;</span>,<span class="st">&quot;15:00-16:00&quot;</span>,</span>
<span id="cb12-23"><a href="acoustic-space-use.html#cb12-23"></a>                 <span class="st">&quot;16:00-17:00&quot;</span>,<span class="st">&quot;17:00-18:00&quot;</span>,<span class="st">&quot;18:00-19:00&quot;</span>,<span class="st">&quot;19:00-20:00&quot;</span>,</span>
<span id="cb12-24"><a href="acoustic-space-use.html#cb12-24"></a>                 <span class="st">&quot;20:00-21:00&quot;</span>,<span class="st">&quot;21:00-22:00&quot;</span>,<span class="st">&quot;22:00-23:00&quot;</span>,<span class="st">&quot;23:00-24:00&quot;</span>)</span>
<span id="cb12-25"><a href="acoustic-space-use.html#cb12-25"></a></span>
<span id="cb12-26"><a href="acoustic-space-use.html#cb12-26"></a><span class="co"># Loading parameters necessary for the Short-term fourier transform to be performed on hourly aggregates of data for each site_date combination</span></span>
<span id="cb12-27"><a href="acoustic-space-use.html#cb12-27"></a>f &lt;-<span class="st"> </span><span class="dv">48000</span></span>
<span id="cb12-28"><a href="acoustic-space-use.html#cb12-28"></a>wl &lt;-<span class="st"> </span><span class="dv">256</span> <span class="co"># This window length should be changed as a function of the frequency resolution (ie. bin size) and temporal resolution (ie. time)</span></span>
<span id="cb12-29"><a href="acoustic-space-use.html#cb12-29"></a>ovlp &lt;-<span class="st"> </span><span class="dv">50</span></span>
<span id="cb12-30"><a href="acoustic-space-use.html#cb12-30"></a>wn &lt;-<span class="st"> &quot;hanning&quot;</span></span>
<span id="cb12-31"><a href="acoustic-space-use.html#cb12-31"></a></span>
<span id="cb12-32"><a href="acoustic-space-use.html#cb12-32"></a><span class="co"># Store the 24 hour acoustic space use data in a list and name it by a unique site and date</span></span>
<span id="cb12-33"><a href="acoustic-space-use.html#cb12-33"></a>site_date_asu &lt;-<span class="st">  </span><span class="kw">list</span>()</span>
<span id="cb12-34"><a href="acoustic-space-use.html#cb12-34"></a></span>
<span id="cb12-35"><a href="acoustic-space-use.html#cb12-35"></a><span class="co"># Add a progress bar for the loop</span></span>
<span id="cb12-36"><a href="acoustic-space-use.html#cb12-36"></a>pb &lt;-<span class="st"> </span><span class="kw">txtProgressBar</span>(</span>
<span id="cb12-37"><a href="acoustic-space-use.html#cb12-37"></a>  <span class="dt">min =</span> <span class="dv">0</span>,</span>
<span id="cb12-38"><a href="acoustic-space-use.html#cb12-38"></a>  <span class="dt">max =</span> <span class="kw">length</span>(<span class="kw">unique</span>(site_date)),</span>
<span id="cb12-39"><a href="acoustic-space-use.html#cb12-39"></a>  <span class="dt">style =</span> <span class="dv">3</span></span>
<span id="cb12-40"><a href="acoustic-space-use.html#cb12-40"></a>)</span>
<span id="cb12-41"><a href="acoustic-space-use.html#cb12-41"></a></span>
<span id="cb12-42"><a href="acoustic-space-use.html#cb12-42"></a><span class="co"># Select only 24 hours of data (00:00:00 to 23:55:00) for every unique site-date</span></span>
<span id="cb12-43"><a href="acoustic-space-use.html#cb12-43"></a></span>
<span id="cb12-44"><a href="acoustic-space-use.html#cb12-44"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(<span class="kw">unique</span>(site_date))){ </span>
<span id="cb12-45"><a href="acoustic-space-use.html#cb12-45"></a>  </span>
<span id="cb12-46"><a href="acoustic-space-use.html#cb12-46"></a>  <span class="kw">tic</span>(<span class="st">&quot;Total time for a single site-day combination&quot;</span>)</span>
<span id="cb12-47"><a href="acoustic-space-use.html#cb12-47"></a>  </span>
<span id="cb12-48"><a href="acoustic-space-use.html#cb12-48"></a>  <span class="co"># Store the acoustic space use data in a data.frame for plotting and analysis</span></span>
<span id="cb12-49"><a href="acoustic-space-use.html#cb12-49"></a>  space_use &lt;-<span class="st"> </span><span class="kw">data.frame</span>()</span>
<span id="cb12-50"><a href="acoustic-space-use.html#cb12-50"></a></span>
<span id="cb12-51"><a href="acoustic-space-use.html#cb12-51"></a>  <span class="co"># Extract the strings first by site </span></span>
<span id="cb12-52"><a href="acoustic-space-use.html#cb12-52"></a>  dat &lt;-<span class="st"> </span>files[stringr<span class="op">::</span><span class="kw">str_detect</span>(files,<span class="kw">unique</span>(site_date)[i])]</span>
<span id="cb12-53"><a href="acoustic-space-use.html#cb12-53"></a>  </span>
<span id="cb12-54"><a href="acoustic-space-use.html#cb12-54"></a>  <span class="co"># Parallelize the runs</span></span>
<span id="cb12-55"><a href="acoustic-space-use.html#cb12-55"></a>  cl &lt;-<span class="st"> </span><span class="kw">makeCluster</span>(<span class="dv">6</span>, <span class="dt">type =</span> <span class="st">&quot;SOCK&quot;</span>)</span>
<span id="cb12-56"><a href="acoustic-space-use.html#cb12-56"></a>  <span class="kw">registerDoSNOW</span>(cl)</span>
<span id="cb12-57"><a href="acoustic-space-use.html#cb12-57"></a>  </span>
<span id="cb12-58"><a href="acoustic-space-use.html#cb12-58"></a>  <span class="co"># Store the each hour of data for an entire day as a list here (raw audio files read by tuneR::readWave())</span></span>
<span id="cb12-59"><a href="acoustic-space-use.html#cb12-59"></a>  <span class="kw">tic</span>(<span class="st">&quot;Reading in .WAV files&quot;</span>)</span>
<span id="cb12-60"><a href="acoustic-space-use.html#cb12-60"></a>  dailydata &lt;-<span class="st"> </span><span class="kw">foreach</span>(<span class="dt">k=</span><span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(dat), <span class="dt">.combine =</span> <span class="st">&#39;c&#39;</span>, <span class="dt">.inorder =</span> T, <span class="dt">.packages =</span> <span class="st">&#39;tuneR&#39;</span>) <span class="op">%dopar%</span><span class="st"> </span>{</span>
<span id="cb12-61"><a href="acoustic-space-use.html#cb12-61"></a>    r &lt;-<span class="st"> </span><span class="kw">readWave</span>(dat[k])</span>
<span id="cb12-62"><a href="acoustic-space-use.html#cb12-62"></a>  }</span>
<span id="cb12-63"><a href="acoustic-space-use.html#cb12-63"></a>  <span class="kw">toc</span>()</span>
<span id="cb12-64"><a href="acoustic-space-use.html#cb12-64"></a>  <span class="kw">gc</span>()</span>
<span id="cb12-65"><a href="acoustic-space-use.html#cb12-65"></a>  <span class="kw">stopCluster</span>(cl)</span>
<span id="cb12-66"><a href="acoustic-space-use.html#cb12-66"></a>  </span>
<span id="cb12-67"><a href="acoustic-space-use.html#cb12-67"></a>  <span class="co"># renaming the files to ensure that data is read in hour by hour and stored in a separate object called hourlydata</span></span>
<span id="cb12-68"><a href="acoustic-space-use.html#cb12-68"></a>  <span class="co"># Below we read the first 12 files in and then save it after computing the STDFT and then repeating it for the next 12 files and so on</span></span>
<span id="cb12-69"><a href="acoustic-space-use.html#cb12-69"></a>  </span>
<span id="cb12-70"><a href="acoustic-space-use.html#cb12-70"></a>  <span class="cf">for</span>(t <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>(<span class="kw">length</span>(hour_seq)<span class="op">-</span><span class="dv">1</span>)) { <span class="co"># Every 12 files correspond to one hour </span></span>
<span id="cb12-71"><a href="acoustic-space-use.html#cb12-71"></a>    <span class="kw">tic</span>(<span class="st">&quot;Computing Short-term fourier transforms for each hour&quot;</span>)</span>
<span id="cb12-72"><a href="acoustic-space-use.html#cb12-72"></a>    <span class="cf">if</span> (t <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) {</span>
<span id="cb12-73"><a href="acoustic-space-use.html#cb12-73"></a>    hourlydata &lt;-<span class="st"> </span>dailydata[hour_seq[t]<span class="op">:</span>hour_seq[t<span class="op">+</span><span class="dv">1</span>]]</span>
<span id="cb12-74"><a href="acoustic-space-use.html#cb12-74"></a>    } <span class="cf">else</span> {</span>
<span id="cb12-75"><a href="acoustic-space-use.html#cb12-75"></a>    hourlydata &lt;-<span class="st"> </span>dailydata[(hour_seq[t]<span class="op">+</span><span class="dv">1</span>)<span class="op">:</span>hour_seq[t<span class="op">+</span><span class="dv">1</span>]]</span>
<span id="cb12-76"><a href="acoustic-space-use.html#cb12-76"></a>    }</span>
<span id="cb12-77"><a href="acoustic-space-use.html#cb12-77"></a>    </span>
<span id="cb12-78"><a href="acoustic-space-use.html#cb12-78"></a>  <span class="kw">gc</span>()</span>
<span id="cb12-79"><a href="acoustic-space-use.html#cb12-79"></a>  </span>
<span id="cb12-80"><a href="acoustic-space-use.html#cb12-80"></a>  <span class="co"># Parallelize the runs</span></span>
<span id="cb12-81"><a href="acoustic-space-use.html#cb12-81"></a>  cl &lt;-<span class="st"> </span><span class="kw">makeCluster</span>(<span class="dv">6</span>, <span class="dt">type =</span> <span class="st">&quot;SOCK&quot;</span>)</span>
<span id="cb12-82"><a href="acoustic-space-use.html#cb12-82"></a>  <span class="kw">registerDoSNOW</span>(cl)</span>
<span id="cb12-83"><a href="acoustic-space-use.html#cb12-83"></a>  </span>
<span id="cb12-84"><a href="acoustic-space-use.html#cb12-84"></a>  <span class="co"># Store every hour&#39;s ASU data here</span></span>
<span id="cb12-85"><a href="acoustic-space-use.html#cb12-85"></a>  data_per_hour &lt;-<span class="st"> </span><span class="kw">foreach</span>(<span class="dt">z =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(hourlydata), <span class="dt">.combine =</span> <span class="st">&#39;rbind&#39;</span>,</span>
<span id="cb12-86"><a href="acoustic-space-use.html#cb12-86"></a>                           <span class="dt">.inorder=</span>T, <span class="dt">.packages =</span> <span class="st">&#39;seewave&#39;</span>) <span class="op">%dopar%</span><span class="st"> </span>{</span>
<span id="cb12-87"><a href="acoustic-space-use.html#cb12-87"></a>      wave &lt;-<span class="st"> </span>hourlydata[[z]] </span>
<span id="cb12-88"><a href="acoustic-space-use.html#cb12-88"></a>      n &lt;-<span class="st"> </span><span class="kw">length</span>(wave)</span>
<span id="cb12-89"><a href="acoustic-space-use.html#cb12-89"></a>        </span>
<span id="cb12-90"><a href="acoustic-space-use.html#cb12-90"></a>      <span class="co">## Short-term Fourier transform (using a seewave internal function)</span></span>
<span id="cb12-91"><a href="acoustic-space-use.html#cb12-91"></a>      m &lt;-<span class="st"> </span><span class="kw">sspectro</span>(wave, <span class="dt">f =</span> f, <span class="dt">wl =</span> wl, <span class="dt">ovlp =</span> ovlp, <span class="dt">wn =</span> wn)</span>
<span id="cb12-92"><a href="acoustic-space-use.html#cb12-92"></a></span>
<span id="cb12-93"><a href="acoustic-space-use.html#cb12-93"></a>      <span class="co"># Frequency selection and frequency axis</span></span>
<span id="cb12-94"><a href="acoustic-space-use.html#cb12-94"></a>      <span class="co"># Here, want only a sequence of numbers that correspond to the length of rows       # of the short-time fourier transform and we divide it by 1000 to get values        # in kHz</span></span>
<span id="cb12-95"><a href="acoustic-space-use.html#cb12-95"></a>      freq &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">0</span>, (f<span class="op">/</span><span class="dv">2</span>) <span class="op">-</span><span class="st"> </span>(f<span class="op">/</span>wl), <span class="dt">length.out =</span> <span class="kw">nrow</span>(m))<span class="op">/</span><span class="dv">1000</span></span>
<span id="cb12-96"><a href="acoustic-space-use.html#cb12-96"></a>        </span>
<span id="cb12-97"><a href="acoustic-space-use.html#cb12-97"></a>      <span class="co"># Calculate acoustic space use per frequency bin </span></span>
<span id="cb12-98"><a href="acoustic-space-use.html#cb12-98"></a>      f.cont &lt;-<span class="st"> </span><span class="kw">apply</span>(m, <span class="dt">MARGIN =</span> <span class="dv">1</span>, <span class="dt">FUN =</span> sum)</span>
<span id="cb12-99"><a href="acoustic-space-use.html#cb12-99"></a>        </span>
<span id="cb12-100"><a href="acoustic-space-use.html#cb12-100"></a>      <span class="co"># Store the space use data in a dataframe for plotting later</span></span>
<span id="cb12-101"><a href="acoustic-space-use.html#cb12-101"></a>      a &lt;-<span class="st"> </span><span class="kw">data.frame</span>(freq, f.cont)</span>
<span id="cb12-102"><a href="acoustic-space-use.html#cb12-102"></a>    }</span>
<span id="cb12-103"><a href="acoustic-space-use.html#cb12-103"></a>  </span>
<span id="cb12-104"><a href="acoustic-space-use.html#cb12-104"></a>  <span class="kw">rm</span>(hourlydata); <span class="kw">gc</span>()</span>
<span id="cb12-105"><a href="acoustic-space-use.html#cb12-105"></a>    </span>
<span id="cb12-106"><a href="acoustic-space-use.html#cb12-106"></a>  data_per_hour  &lt;-<span class="st"> </span>data_per_hour <span class="op">%&gt;%</span></span>
<span id="cb12-107"><a href="acoustic-space-use.html#cb12-107"></a><span class="st">  </span><span class="kw">group_by</span>(freq) <span class="op">%&gt;%</span></span>
<span id="cb12-108"><a href="acoustic-space-use.html#cb12-108"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">f.cont=</span><span class="kw">sum</span>(f.cont)) </span>
<span id="cb12-109"><a href="acoustic-space-use.html#cb12-109"></a>  </span>
<span id="cb12-110"><a href="acoustic-space-use.html#cb12-110"></a>  data_per_hour<span class="op">$</span>f.cont &lt;-<span class="st"> </span>(data_per_hour<span class="op">$</span>f.cont)<span class="op">/</span><span class="dv">12</span></span>
<span id="cb12-111"><a href="acoustic-space-use.html#cb12-111"></a>  data_per_hour<span class="op">$</span>time_of_day &lt;-<span class="st"> </span>time_of_day[t]</span>
<span id="cb12-112"><a href="acoustic-space-use.html#cb12-112"></a>  </span>
<span id="cb12-113"><a href="acoustic-space-use.html#cb12-113"></a>  space_use &lt;-<span class="st"> </span><span class="kw">rbind</span>(data_per_hour, space_use)</span>
<span id="cb12-114"><a href="acoustic-space-use.html#cb12-114"></a>  <span class="kw">stopCluster</span>(cl); <span class="kw">gc</span>()</span>
<span id="cb12-115"><a href="acoustic-space-use.html#cb12-115"></a>  <span class="kw">toc</span>()</span>
<span id="cb12-116"><a href="acoustic-space-use.html#cb12-116"></a>}</span>
<span id="cb12-117"><a href="acoustic-space-use.html#cb12-117"></a>  space_use &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(space_use)</span>
<span id="cb12-118"><a href="acoustic-space-use.html#cb12-118"></a>  site_date_asu &lt;-<span class="st"> </span><span class="kw">c</span>(site_date_asu,<span class="kw">list</span>(space_use))</span>
<span id="cb12-119"><a href="acoustic-space-use.html#cb12-119"></a>  <span class="kw">names</span>(site_date_asu)[i] &lt;-<span class="st"> </span><span class="kw">unique</span>(site_date)[i] </span>
<span id="cb12-120"><a href="acoustic-space-use.html#cb12-120"></a>  <span class="kw">rm</span>(space_use, dailydata, data_per_hour); <span class="kw">gc</span>()</span>
<span id="cb12-121"><a href="acoustic-space-use.html#cb12-121"></a>  <span class="kw">setTxtProgressBar</span>(pb, i)</span>
<span id="cb12-122"><a href="acoustic-space-use.html#cb12-122"></a>  <span class="kw">toc</span>()</span>
<span id="cb12-123"><a href="acoustic-space-use.html#cb12-123"></a>}</span>
<span id="cb12-124"><a href="acoustic-space-use.html#cb12-124"></a><span class="kw">close</span>(pb)</span>
<span id="cb12-125"><a href="acoustic-space-use.html#cb12-125"></a></span>
<span id="cb12-126"><a href="acoustic-space-use.html#cb12-126"></a><span class="co"># store the list object for later</span></span>
<span id="cb12-127"><a href="acoustic-space-use.html#cb12-127"></a><span class="kw">list.save</span>(site_date_asu, <span class="st">&quot;data/site_date_asu.rdata&quot;</span>)</span>
<span id="cb12-128"><a href="acoustic-space-use.html#cb12-128"></a></span>
<span id="cb12-129"><a href="acoustic-space-use.html#cb12-129"></a><span class="co"># Save the list of dataframes for future analysis</span></span>
<span id="cb12-130"><a href="acoustic-space-use.html#cb12-130"></a>siteByDayAsu &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(site_date_asu, <span class="dt">.id =</span> <span class="st">&quot;Site_Day&quot;</span>)</span>
<span id="cb12-131"><a href="acoustic-space-use.html#cb12-131"></a></span>
<span id="cb12-132"><a href="acoustic-space-use.html#cb12-132"></a><span class="co"># Write to .csv</span></span>
<span id="cb12-133"><a href="acoustic-space-use.html#cb12-133"></a><span class="kw">write.csv</span>(siteByDayAsu, <span class="st">&quot;data/site-by-day-asu.csv&quot;</span>, <span class="dt">row.names =</span> F) </span></code></pre></div>
</div>
<div id="average-acoustic-space-use" class="section level2">
<h2><span class="header-section-number">4.4</span> Average acoustic space use</h2>
<p>Now that we have calculated acoustic space use values for a given frequency bin size and time resolution for every unique site-date combination, we would like to obtain a single set of space use values for every unique site. In other words, we would like to average space use values across all frequency bins for five days.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb13-1"><a href="acoustic-space-use.html#cb13-1"></a><span class="co"># All unique sites</span></span>
<span id="cb13-2"><a href="acoustic-space-use.html#cb13-2"></a>site &lt;-<span class="st"> </span><span class="kw">str_extract</span>(<span class="kw">basename</span>(files),<span class="st">&#39;^([[:alnum:]])+&#39;</span>)</span>
<span id="cb13-3"><a href="acoustic-space-use.html#cb13-3"></a><span class="kw">unique</span>(site)</span>
<span id="cb13-4"><a href="acoustic-space-use.html#cb13-4"></a></span>
<span id="cb13-5"><a href="acoustic-space-use.html#cb13-5"></a><span class="co"># Store the site-wise ASU values</span></span>
<span id="cb13-6"><a href="acoustic-space-use.html#cb13-6"></a>site_asu &lt;-<span class="st"> </span><span class="kw">list</span>()</span>
<span id="cb13-7"><a href="acoustic-space-use.html#cb13-7"></a></span>
<span id="cb13-8"><a href="acoustic-space-use.html#cb13-8"></a><span class="co"># Loop through site-wise data and average data for each site</span></span>
<span id="cb13-9"><a href="acoustic-space-use.html#cb13-9"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(<span class="kw">unique</span>(site))) {</span>
<span id="cb13-10"><a href="acoustic-space-use.html#cb13-10"></a>  </span>
<span id="cb13-11"><a href="acoustic-space-use.html#cb13-11"></a>  <span class="co"># Extract data needed for every unique site</span></span>
<span id="cb13-12"><a href="acoustic-space-use.html#cb13-12"></a>  dat &lt;-<span class="st"> </span>site_date_asu[stringr<span class="op">::</span><span class="kw">str_detect</span>(<span class="kw">names</span>(site_date_asu),<span class="kw">unique</span>(site)[i])]</span>
<span id="cb13-13"><a href="acoustic-space-use.html#cb13-13"></a>  </span>
<span id="cb13-14"><a href="acoustic-space-use.html#cb13-14"></a>  <span class="co"># Sum up values of acoustic space use across X no. of days for every unique site</span></span>
<span id="cb13-15"><a href="acoustic-space-use.html#cb13-15"></a>  asu_sum &lt;-<span class="st">  </span>dat <span class="op">%&gt;%</span></span>
<span id="cb13-16"><a href="acoustic-space-use.html#cb13-16"></a><span class="st">    </span><span class="kw">bind_rows</span>(<span class="dt">.id=</span><span class="st">&quot;data&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb13-17"><a href="acoustic-space-use.html#cb13-17"></a><span class="st">    </span><span class="kw">group_by</span>(freq, time_of_day) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb13-18"><a href="acoustic-space-use.html#cb13-18"></a><span class="st">    </span><span class="kw">summarize</span>(<span class="dt">f.cont.sum=</span><span class="kw">sum</span>(f.cont))</span>
<span id="cb13-19"><a href="acoustic-space-use.html#cb13-19"></a>  </span>
<span id="cb13-20"><a href="acoustic-space-use.html#cb13-20"></a>  <span class="co"># Averaging data as a function of number of days for a given site over which data was summed</span></span>
<span id="cb13-21"><a href="acoustic-space-use.html#cb13-21"></a>  asu_sum<span class="op">$</span>f.cont.sum &lt;-<span class="st"> </span>(asu_sum<span class="op">$</span>f.cont.sum)<span class="op">/</span><span class="kw">length</span>(dat)</span>
<span id="cb13-22"><a href="acoustic-space-use.html#cb13-22"></a>  </span>
<span id="cb13-23"><a href="acoustic-space-use.html#cb13-23"></a>  <span class="co"># Scaling the data between 0 to 1 for the sake of comparison across sites</span></span>
<span id="cb13-24"><a href="acoustic-space-use.html#cb13-24"></a>  asu_sum<span class="op">$</span>f.cont.sum &lt;-<span class="st"> </span><span class="kw">range01</span>(asu_sum<span class="op">$</span>f.cont.sum)</span>
<span id="cb13-25"><a href="acoustic-space-use.html#cb13-25"></a>  </span>
<span id="cb13-26"><a href="acoustic-space-use.html#cb13-26"></a>  asu_sum &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(asu_sum)</span>
<span id="cb13-27"><a href="acoustic-space-use.html#cb13-27"></a>  site_asu &lt;-<span class="st"> </span><span class="kw">c</span>(site_asu, <span class="kw">list</span>(asu_sum))</span>
<span id="cb13-28"><a href="acoustic-space-use.html#cb13-28"></a>  <span class="kw">names</span>(site_asu)[i] &lt;-<span class="st"> </span><span class="kw">unique</span>(site)[i] </span>
<span id="cb13-29"><a href="acoustic-space-use.html#cb13-29"></a>  <span class="kw">rm</span>(dat,asu_sum)</span>
<span id="cb13-30"><a href="acoustic-space-use.html#cb13-30"></a>}</span>
<span id="cb13-31"><a href="acoustic-space-use.html#cb13-31"></a></span>
<span id="cb13-32"><a href="acoustic-space-use.html#cb13-32"></a><span class="co"># store the list object for later</span></span>
<span id="cb13-33"><a href="acoustic-space-use.html#cb13-33"></a><span class="kw">list.save</span>(site_asu, <span class="st">&quot;data/site_asu.rdata&quot;</span>)</span>
<span id="cb13-34"><a href="acoustic-space-use.html#cb13-34"></a></span>
<span id="cb13-35"><a href="acoustic-space-use.html#cb13-35"></a><span class="co"># Save the list of dataframes for future analysis</span></span>
<span id="cb13-36"><a href="acoustic-space-use.html#cb13-36"></a>siteWiseAsu &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(site_asu, <span class="dt">.id =</span> <span class="st">&quot;Site&quot;</span>)</span>
<span id="cb13-37"><a href="acoustic-space-use.html#cb13-37"></a></span>
<span id="cb13-38"><a href="acoustic-space-use.html#cb13-38"></a><span class="co"># Write to .csv</span></span>
<span id="cb13-39"><a href="acoustic-space-use.html#cb13-39"></a><span class="kw">write.csv</span>(siteWiseAsu, <span class="st">&quot;data/site-wise-asu.csv&quot;</span>, <span class="dt">row.names =</span> F)</span></code></pre></div>
</div>
<div id="visual-examination-of-asu" class="section level2">
<h2><span class="header-section-number">4.5</span> Visual examination of ASU</h2>
<p>We will use ggplot2 to plot and save individual ASU plots for each unique site-date combination. This will then be repeated for each unique site (calculated in the previous chunk of code)</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb14-1"><a href="acoustic-space-use.html#cb14-1"></a><span class="co"># Saving the ggplots to a folder for every unique site-date combination</span></span>
<span id="cb14-2"><a href="acoustic-space-use.html#cb14-2"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(site_date_asu)){</span>
<span id="cb14-3"><a href="acoustic-space-use.html#cb14-3"></a>  </span>
<span id="cb14-4"><a href="acoustic-space-use.html#cb14-4"></a>  <span class="co"># Get the data out from a list to a dataframe (else ggplot won&#39;t accept it)</span></span>
<span id="cb14-5"><a href="acoustic-space-use.html#cb14-5"></a>  dat &lt;-<span class="st"> </span><span class="kw">data.frame</span>(site_date_asu[i])</span>
<span id="cb14-6"><a href="acoustic-space-use.html#cb14-6"></a><span class="kw">names</span>(dat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;freq&quot;</span>,<span class="st">&quot;f.cont&quot;</span>,<span class="st">&quot;time_of_day&quot;</span>)</span>
<span id="cb14-7"><a href="acoustic-space-use.html#cb14-7"></a>  </span>
<span id="cb14-8"><a href="acoustic-space-use.html#cb14-8"></a>  <span class="co"># Plot the data</span></span>
<span id="cb14-9"><a href="acoustic-space-use.html#cb14-9"></a>  g1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(<span class="dt">x=</span>time_of_day, <span class="dt">y=</span>freq)) <span class="op">+</span><span class="st">  </span></span>
<span id="cb14-10"><a href="acoustic-space-use.html#cb14-10"></a><span class="st">  </span><span class="kw">geom_tile</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> f.cont)) <span class="op">+</span></span>
<span id="cb14-11"><a href="acoustic-space-use.html#cb14-11"></a><span class="st">  </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colours =</span> <span class="kw">brewer.pal</span>(<span class="dv">9</span>,<span class="st">&quot;Reds&quot;</span>))<span class="op">+</span></span>
<span id="cb14-12"><a href="acoustic-space-use.html#cb14-12"></a><span class="st">    </span><span class="co"># scale_fill_scico(palette = &quot;vikO&quot;) +</span></span>
<span id="cb14-13"><a href="acoustic-space-use.html#cb14-13"></a><span class="st">    </span><span class="kw">theme_bw</span>() <span class="op">+</span></span>
<span id="cb14-14"><a href="acoustic-space-use.html#cb14-14"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;Time of Day (in hours)&quot;</span>,</span>
<span id="cb14-15"><a href="acoustic-space-use.html#cb14-15"></a>       <span class="dt">y=</span><span class="st">&quot;Frequency (in kHz) &quot;</span>) <span class="op">+</span></span>
<span id="cb14-16"><a href="acoustic-space-use.html#cb14-16"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb14-17"><a href="acoustic-space-use.html#cb14-17"></a>        <span class="dt">axis.ticks.length.x =</span> <span class="kw">unit</span>(.<span class="dv">5</span>, <span class="st">&quot;cm&quot;</span>),</span>
<span id="cb14-18"><a href="acoustic-space-use.html#cb14-18"></a>        <span class="dt">axis.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">14</span>),</span>
<span id="cb14-19"><a href="acoustic-space-use.html#cb14-19"></a>        <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle=</span><span class="dv">90</span>, <span class="dt">vjust=</span><span class="fl">0.5</span>, <span class="dt">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb14-20"><a href="acoustic-space-use.html#cb14-20"></a>        <span class="dt">legend.title =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb14-21"><a href="acoustic-space-use.html#cb14-21"></a>        <span class="dt">legend.key.size =</span> <span class="kw">unit</span>(<span class="dv">1</span>,<span class="st">&quot;cm&quot;</span>),</span>
<span id="cb14-22"><a href="acoustic-space-use.html#cb14-22"></a>        <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>))</span>
<span id="cb14-23"><a href="acoustic-space-use.html#cb14-23"></a>  </span>
<span id="cb14-24"><a href="acoustic-space-use.html#cb14-24"></a>  <span class="co"># Save the data to a folder</span></span>
<span id="cb14-25"><a href="acoustic-space-use.html#cb14-25"></a>  <span class="kw">ggsave</span>(<span class="dt">filename=</span><span class="st">&quot;&quot;</span>,<span class="dt">width=</span><span class="dv">12</span>, <span class="dt">height=</span><span class="dv">7</span>, <span class="dt">units=</span><span class="st">&quot;in&quot;</span>, <span class="dt">dpi =</span> <span class="dv">300</span>, </span>
<span id="cb14-26"><a href="acoustic-space-use.html#cb14-26"></a>         <span class="dt">plot=</span>g1, <span class="dt">device=</span><span class="st">&quot;png&quot;</span>, <span class="dt">path =</span> <span class="kw">paste</span>(<span class="st">&quot;figs/siteByDayAsu/&quot;</span>,  <span class="kw">paste</span>(<span class="kw">names</span>(site_date_asu)[i], <span class="st">&quot;.png&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span>), <span class="dt">sep=</span><span class="st">&quot;&quot;</span>))</span>
<span id="cb14-27"><a href="acoustic-space-use.html#cb14-27"></a>}</span>
<span id="cb14-28"><a href="acoustic-space-use.html#cb14-28"></a></span>
<span id="cb14-29"><a href="acoustic-space-use.html#cb14-29"></a></span>
<span id="cb14-30"><a href="acoustic-space-use.html#cb14-30"></a><span class="co"># Saving the ggplots to a folder for every unique site</span></span>
<span id="cb14-31"><a href="acoustic-space-use.html#cb14-31"></a><span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(site_asu)){</span>
<span id="cb14-32"><a href="acoustic-space-use.html#cb14-32"></a>  </span>
<span id="cb14-33"><a href="acoustic-space-use.html#cb14-33"></a>  <span class="co"># Get the data out from a list to a .dataframe (else ggplot won&#39;t accept it)</span></span>
<span id="cb14-34"><a href="acoustic-space-use.html#cb14-34"></a>  dat &lt;-<span class="st"> </span><span class="kw">data.frame</span>(site_asu[j])</span>
<span id="cb14-35"><a href="acoustic-space-use.html#cb14-35"></a>  <span class="kw">names</span>(dat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;freq&quot;</span>,<span class="st">&quot;time_of_day&quot;</span>,<span class="st">&quot;f.cont.sum&quot;</span>)</span>
<span id="cb14-36"><a href="acoustic-space-use.html#cb14-36"></a>  </span>
<span id="cb14-37"><a href="acoustic-space-use.html#cb14-37"></a>  <span class="co"># Plot the data</span></span>
<span id="cb14-38"><a href="acoustic-space-use.html#cb14-38"></a>  g1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(dat, <span class="kw">aes</span>(<span class="dt">x=</span>time_of_day, <span class="dt">y=</span>freq)) <span class="op">+</span><span class="st">  </span></span>
<span id="cb14-39"><a href="acoustic-space-use.html#cb14-39"></a><span class="st">  </span><span class="kw">geom_tile</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> f.cont.sum)) <span class="op">+</span></span>
<span id="cb14-40"><a href="acoustic-space-use.html#cb14-40"></a><span class="st">  </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colours =</span> <span class="kw">brewer.pal</span>(<span class="dv">9</span>,<span class="st">&quot;Reds&quot;</span>))<span class="op">+</span></span>
<span id="cb14-41"><a href="acoustic-space-use.html#cb14-41"></a><span class="st">    </span><span class="co"># scale_fill_scico(palette = &quot;vikO&quot;) +</span></span>
<span id="cb14-42"><a href="acoustic-space-use.html#cb14-42"></a><span class="st">    </span><span class="kw">theme_bw</span>() <span class="op">+</span></span>
<span id="cb14-43"><a href="acoustic-space-use.html#cb14-43"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;Time of Day (in hours)&quot;</span>,</span>
<span id="cb14-44"><a href="acoustic-space-use.html#cb14-44"></a>       <span class="dt">y=</span><span class="st">&quot;Frequency (in kHz) &quot;</span>) <span class="op">+</span></span>
<span id="cb14-45"><a href="acoustic-space-use.html#cb14-45"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb14-46"><a href="acoustic-space-use.html#cb14-46"></a>        <span class="dt">axis.ticks.length.x =</span> <span class="kw">unit</span>(.<span class="dv">5</span>, <span class="st">&quot;cm&quot;</span>),</span>
<span id="cb14-47"><a href="acoustic-space-use.html#cb14-47"></a>        <span class="dt">axis.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">14</span>),</span>
<span id="cb14-48"><a href="acoustic-space-use.html#cb14-48"></a>        <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle=</span><span class="dv">90</span>, <span class="dt">vjust=</span><span class="fl">0.5</span>, <span class="dt">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb14-49"><a href="acoustic-space-use.html#cb14-49"></a>        <span class="dt">legend.title =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb14-50"><a href="acoustic-space-use.html#cb14-50"></a>        <span class="dt">legend.key.size =</span> <span class="kw">unit</span>(<span class="dv">1</span>,<span class="st">&quot;cm&quot;</span>),</span>
<span id="cb14-51"><a href="acoustic-space-use.html#cb14-51"></a>        <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>))</span>
<span id="cb14-52"><a href="acoustic-space-use.html#cb14-52"></a>  </span>
<span id="cb14-53"><a href="acoustic-space-use.html#cb14-53"></a>  <span class="co"># Save the data to a folder</span></span>
<span id="cb14-54"><a href="acoustic-space-use.html#cb14-54"></a>  <span class="kw">ggsave</span>(<span class="dt">filename=</span><span class="st">&quot;&quot;</span>,<span class="dt">width=</span><span class="dv">12</span>, <span class="dt">height=</span><span class="dv">7</span>, <span class="dt">units=</span><span class="st">&quot;in&quot;</span>, <span class="dt">dpi =</span> <span class="dv">300</span>, </span>
<span id="cb14-55"><a href="acoustic-space-use.html#cb14-55"></a>         <span class="dt">plot=</span>g1, <span class="dt">device=</span><span class="st">&quot;png&quot;</span>, <span class="dt">path =</span> <span class="kw">paste</span>(<span class="st">&quot;figs/siteWiseAsu/&quot;</span>,  <span class="kw">paste</span>(<span class="kw">names</span>(site_asu)[j], <span class="st">&quot;.png&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span>), <span class="dt">sep=</span><span class="st">&quot;&quot;</span>))</span>
<span id="cb14-56"><a href="acoustic-space-use.html#cb14-56"></a>}</span></code></pre></div>
</div>
<div id="representative-figure-for-publication" class="section level2">
<h2><span class="header-section-number">4.6</span> Representative figure for publication</h2>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb15-1"><a href="acoustic-space-use.html#cb15-1"></a><span class="co"># load .rdata to plot select figures for publication</span></span>
<span id="cb15-2"><a href="acoustic-space-use.html#cb15-2"></a>site_asu &lt;-<span class="st"> </span><span class="kw">load</span>(<span class="st">&quot;data/site_asu.rdata&quot;</span>)</span>
<span id="cb15-3"><a href="acoustic-space-use.html#cb15-3"></a></span>
<span id="cb15-4"><a href="acoustic-space-use.html#cb15-4"></a>site_asu &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(site_asu, <span class="dt">.id=</span><span class="st">&quot;Site&quot;</span>)</span>
<span id="cb15-5"><a href="acoustic-space-use.html#cb15-5"></a></span>
<span id="cb15-6"><a href="acoustic-space-use.html#cb15-6"></a><span class="co"># Selecting three representative sites (PANMP1B, INBS04R, INBS04U)</span></span>
<span id="cb15-7"><a href="acoustic-space-use.html#cb15-7"></a>bm &lt;-<span class="st"> </span>site_asu <span class="op">%&gt;%</span></span>
<span id="cb15-8"><a href="acoustic-space-use.html#cb15-8"></a><span class="st">   </span><span class="kw">filter</span>(Site<span class="op">==</span><span class="st">&quot;PANMP1B&quot;</span>)</span>
<span id="cb15-9"><a href="acoustic-space-use.html#cb15-9"></a> </span>
<span id="cb15-10"><a href="acoustic-space-use.html#cb15-10"></a>ar &lt;-<span class="st"> </span>site_asu <span class="op">%&gt;%</span></span>
<span id="cb15-11"><a href="acoustic-space-use.html#cb15-11"></a><span class="st">   </span><span class="kw">filter</span>(Site<span class="op">==</span><span class="st">&quot;INBS04R&quot;</span>)</span>
<span id="cb15-12"><a href="acoustic-space-use.html#cb15-12"></a> </span>
<span id="cb15-13"><a href="acoustic-space-use.html#cb15-13"></a>nr &lt;-<span class="st"> </span>site_asu <span class="op">%&gt;%</span></span>
<span id="cb15-14"><a href="acoustic-space-use.html#cb15-14"></a><span class="st">   </span><span class="kw">filter</span>(Site<span class="op">==</span><span class="st">&quot;INBS04U&quot;</span>)</span>
<span id="cb15-15"><a href="acoustic-space-use.html#cb15-15"></a></span>
<span id="cb15-16"><a href="acoustic-space-use.html#cb15-16"></a><span class="co"># create separate figures for benchmark, active and passive sites and then patchwork them</span></span>
<span id="cb15-17"><a href="acoustic-space-use.html#cb15-17"></a></span>
<span id="cb15-18"><a href="acoustic-space-use.html#cb15-18"></a><span class="co"># benchmark site</span></span>
<span id="cb15-19"><a href="acoustic-space-use.html#cb15-19"></a>fig_bm &lt;-<span class="st"> </span><span class="kw">ggplot</span>(bm, <span class="kw">aes</span>(<span class="dt">x=</span>time_of_day, <span class="dt">y=</span>freq)) <span class="op">+</span><span class="st">  </span></span>
<span id="cb15-20"><a href="acoustic-space-use.html#cb15-20"></a><span class="st">  </span><span class="kw">geom_tile</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> f.cont.sum)) <span class="op">+</span></span>
<span id="cb15-21"><a href="acoustic-space-use.html#cb15-21"></a><span class="st">  </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colours =</span> <span class="kw">brewer.pal</span>(<span class="dv">9</span>,<span class="st">&quot;Reds&quot;</span>))<span class="op">+</span></span>
<span id="cb15-22"><a href="acoustic-space-use.html#cb15-22"></a><span class="st">    </span><span class="kw">theme_bw</span>() <span class="op">+</span></span>
<span id="cb15-23"><a href="acoustic-space-use.html#cb15-23"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">fill =</span> <span class="st">&quot;Acoustic Space Use</span><span class="ch">\n</span><span class="st">&quot;</span>) <span class="op">+</span></span>
<span id="cb15-24"><a href="acoustic-space-use.html#cb15-24"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.title =</span> <span class="kw">element_blank</span>(), </span>
<span id="cb15-25"><a href="acoustic-space-use.html#cb15-25"></a>        <span class="dt">axis.ticks.length.x =</span> <span class="kw">unit</span>(.<span class="dv">5</span>, <span class="st">&quot;cm&quot;</span>),</span>
<span id="cb15-26"><a href="acoustic-space-use.html#cb15-26"></a>        <span class="dt">axis.text =</span> <span class="kw">element_text</span>(<span class="dt">family=</span><span class="st">&quot;Century Gothic&quot;</span>,<span class="dt">size =</span> <span class="dv">14</span>),</span>
<span id="cb15-27"><a href="acoustic-space-use.html#cb15-27"></a>        <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle=</span><span class="dv">90</span>, <span class="dt">vjust=</span><span class="fl">0.5</span>, <span class="dt">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb15-28"><a href="acoustic-space-use.html#cb15-28"></a>        <span class="dt">legend.title =</span> <span class="kw">element_text</span>(<span class="dt">family=</span><span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb15-29"><a href="acoustic-space-use.html#cb15-29"></a>                                    <span class="dt">size =</span> <span class="dv">14</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>),</span>
<span id="cb15-30"><a href="acoustic-space-use.html#cb15-30"></a>        <span class="dt">legend.key.size =</span> <span class="kw">unit</span>(<span class="dv">1</span>,<span class="st">&quot;cm&quot;</span>),</span>
<span id="cb15-31"><a href="acoustic-space-use.html#cb15-31"></a>        <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">family=</span><span class="st">&quot;Century Gothic&quot;</span>,<span class="dt">size =</span> <span class="dv">14</span>)) <span class="op">+</span></span>
<span id="cb15-32"><a href="acoustic-space-use.html#cb15-32"></a><span class="st">  </span><span class="kw">annotate</span>(<span class="dt">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="dt">x =</span> <span class="kw">max</span>(bm<span class="op">$</span>time_of_day), <span class="dt">y =</span> <span class="dv">23</span>,  <span class="dt">label =</span> <span class="st">&quot;Benchmark site&quot;</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">family =</span> <span class="st">&quot;Century Gothic&quot;</span>, <span class="dt">size=</span><span class="dv">5</span>, <span class="dt">fontface=</span><span class="st">&quot;bold&quot;</span>)</span>
<span id="cb15-33"><a href="acoustic-space-use.html#cb15-33"></a></span>
<span id="cb15-34"><a href="acoustic-space-use.html#cb15-34"></a><span class="co"># actively restored site</span></span>
<span id="cb15-35"><a href="acoustic-space-use.html#cb15-35"></a>fig_ar &lt;-<span class="st"> </span><span class="kw">ggplot</span>(ar, <span class="kw">aes</span>(<span class="dt">x=</span>time_of_day, <span class="dt">y=</span>freq)) <span class="op">+</span><span class="st">  </span></span>
<span id="cb15-36"><a href="acoustic-space-use.html#cb15-36"></a><span class="st">  </span><span class="kw">geom_tile</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> f.cont.sum)) <span class="op">+</span></span>
<span id="cb15-37"><a href="acoustic-space-use.html#cb15-37"></a><span class="st">  </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colours =</span> <span class="kw">brewer.pal</span>(<span class="dv">9</span>,<span class="st">&quot;Reds&quot;</span>))<span class="op">+</span></span>
<span id="cb15-38"><a href="acoustic-space-use.html#cb15-38"></a><span class="st">    </span><span class="kw">theme_bw</span>() <span class="op">+</span></span>
<span id="cb15-39"><a href="acoustic-space-use.html#cb15-39"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;</span><span class="ch">\n</span><span class="st">Time of Day (in hours)&quot;</span>,</span>
<span id="cb15-40"><a href="acoustic-space-use.html#cb15-40"></a>       <span class="dt">fill =</span> <span class="st">&quot;Acoustic Space Use</span><span class="ch">\n</span><span class="st">&quot;</span>) <span class="op">+</span></span>
<span id="cb15-41"><a href="acoustic-space-use.html#cb15-41"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.title =</span> <span class="kw">element_text</span>(<span class="dt">family=</span><span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb15-42"><a href="acoustic-space-use.html#cb15-42"></a>                                    <span class="dt">size =</span> <span class="dv">14</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb15-43"><a href="acoustic-space-use.html#cb15-43"></a>        <span class="dt">axis.ticks.length.x =</span> <span class="kw">unit</span>(.<span class="dv">5</span>, <span class="st">&quot;cm&quot;</span>),</span>
<span id="cb15-44"><a href="acoustic-space-use.html#cb15-44"></a>        <span class="dt">axis.text =</span> <span class="kw">element_text</span>(<span class="dt">family=</span><span class="st">&quot;Century Gothic&quot;</span>,<span class="dt">size =</span> <span class="dv">14</span>),</span>
<span id="cb15-45"><a href="acoustic-space-use.html#cb15-45"></a>        <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle=</span><span class="dv">90</span>, <span class="dt">vjust=</span><span class="fl">0.5</span>, <span class="dt">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb15-46"><a href="acoustic-space-use.html#cb15-46"></a>        <span class="dt">axis.title.y =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb15-47"><a href="acoustic-space-use.html#cb15-47"></a>        <span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="op">+</span></span>
<span id="cb15-48"><a href="acoustic-space-use.html#cb15-48"></a><span class="st">  </span><span class="kw">annotate</span>(<span class="dt">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="dt">x =</span> <span class="kw">max</span>(ar<span class="op">$</span>time_of_day), <span class="dt">y =</span> <span class="dv">23</span>,  <span class="dt">label =</span> <span class="st">&quot;Actively restored site&quot;</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">family =</span> <span class="st">&quot;Century Gothic&quot;</span>, <span class="dt">size=</span><span class="dv">5</span>, <span class="dt">fontface=</span><span class="st">&quot;bold&quot;</span>)</span>
<span id="cb15-49"><a href="acoustic-space-use.html#cb15-49"></a></span>
<span id="cb15-50"><a href="acoustic-space-use.html#cb15-50"></a><span class="co"># naturally regenerating site</span></span>
<span id="cb15-51"><a href="acoustic-space-use.html#cb15-51"></a>fig_nr &lt;-<span class="st"> </span><span class="kw">ggplot</span>(nr, <span class="kw">aes</span>(<span class="dt">x=</span>time_of_day, <span class="dt">y=</span>freq)) <span class="op">+</span><span class="st">  </span></span>
<span id="cb15-52"><a href="acoustic-space-use.html#cb15-52"></a><span class="st">  </span><span class="kw">geom_tile</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> f.cont.sum)) <span class="op">+</span></span>
<span id="cb15-53"><a href="acoustic-space-use.html#cb15-53"></a><span class="st">  </span><span class="kw">scale_fill_gradientn</span>(<span class="dt">colours =</span> <span class="kw">brewer.pal</span>(<span class="dv">9</span>,<span class="st">&quot;Reds&quot;</span>))<span class="op">+</span></span>
<span id="cb15-54"><a href="acoustic-space-use.html#cb15-54"></a><span class="st">    </span><span class="kw">theme_bw</span>() <span class="op">+</span></span>
<span id="cb15-55"><a href="acoustic-space-use.html#cb15-55"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;Frequency (in kHz)</span><span class="ch">\n</span><span class="st">&quot;</span>,</span>
<span id="cb15-56"><a href="acoustic-space-use.html#cb15-56"></a>       <span class="dt">fill =</span> <span class="st">&quot;Acoustic Space Use</span><span class="ch">\n</span><span class="st">&quot;</span>) <span class="op">+</span></span>
<span id="cb15-57"><a href="acoustic-space-use.html#cb15-57"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.title =</span> <span class="kw">element_text</span>(<span class="dt">family=</span><span class="st">&quot;Century Gothic&quot;</span>,</span>
<span id="cb15-58"><a href="acoustic-space-use.html#cb15-58"></a>                                    <span class="dt">size =</span> <span class="dv">14</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb15-59"><a href="acoustic-space-use.html#cb15-59"></a>        <span class="dt">axis.ticks.length.x =</span> <span class="kw">unit</span>(.<span class="dv">5</span>, <span class="st">&quot;cm&quot;</span>),</span>
<span id="cb15-60"><a href="acoustic-space-use.html#cb15-60"></a>        <span class="dt">axis.text =</span> <span class="kw">element_text</span>(<span class="dt">family=</span><span class="st">&quot;Century Gothic&quot;</span>,<span class="dt">size =</span> <span class="dv">14</span>),</span>
<span id="cb15-61"><a href="acoustic-space-use.html#cb15-61"></a>        <span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb15-62"><a href="acoustic-space-use.html#cb15-62"></a>        <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle=</span><span class="dv">90</span>, <span class="dt">vjust=</span><span class="fl">0.5</span>, <span class="dt">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb15-63"><a href="acoustic-space-use.html#cb15-63"></a>        <span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="op">+</span></span>
<span id="cb15-64"><a href="acoustic-space-use.html#cb15-64"></a><span class="st">  </span><span class="kw">annotate</span>(<span class="dt">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="dt">x =</span> <span class="kw">max</span>(nr<span class="op">$</span>time_of_day), <span class="dt">y =</span> <span class="dv">23</span>,  <span class="dt">label =</span> <span class="st">&quot;Naturally regenerating site&quot;</span>, <span class="dt">hjust =</span> <span class="dv">1</span>, <span class="dt">family =</span> <span class="st">&quot;Century Gothic&quot;</span>, <span class="dt">size=</span><span class="dv">5</span>, <span class="dt">fontface=</span><span class="st">&quot;bold&quot;</span>)</span>
<span id="cb15-65"><a href="acoustic-space-use.html#cb15-65"></a></span>
<span id="cb15-66"><a href="acoustic-space-use.html#cb15-66"></a><span class="co"># patchwork the above three for the Fig. 3</span></span>
<span id="cb15-67"><a href="acoustic-space-use.html#cb15-67"></a>fig_asu &lt;-<span class="st"> </span>fig_nr <span class="op">+</span><span class="st"> </span>fig_ar <span class="op">+</span><span class="st"> </span>fig_bm</span>
<span id="cb15-68"><a href="acoustic-space-use.html#cb15-68"></a></span>
<span id="cb15-69"><a href="acoustic-space-use.html#cb15-69"></a><span class="kw">ggsave</span>(fig_asu, <span class="dt">filename =</span> <span class="st">&quot;figs/fig3.png&quot;</span>, <span class="dt">width=</span><span class="dv">52</span>, <span class="dt">height=</span><span class="dv">17</span>,<span class="dt">device =</span> <span class="kw">png</span>(), <span class="dt">units=</span><span class="st">&quot;cm&quot;</span>, <span class="dt">dpi =</span> <span class="dv">300</span>); <span class="kw">dev.off</span>()</span></code></pre></div>
<div class="figure">
<img src="figs/fig03.png" alt="" />
<p class="caption"><strong>Visual examination of acoustic space use across a naturally regenerating, actively restored and benchmark site</strong>
In this figure, we visually examined ASU for each of the 128 frequency bins and 24 hours across each site and treatment type. Shown here are representative figures for an NR, AR, and BM site. In this visualization, we estimated the proportion of frequency space (values between 0 to 1) that was occupied by vocalizations/sounds above 0.003 dB for every single hour of recording across 24 hours in a day. We observed largely empty frequency bins between 12 kHz to 24 kHz for the majority of AR and NR sites. For the sake of this representative figure, we show the average ASU calculated across five days for each site. However, the patterns described here are broadly consistent across days and sites (Supporting Information). In the above figure, BM = undisturbed benchmark rainforest sites, AR = Actively restored forest sites, and NR = Naturally regenerating forest sites.</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="processing-vegetation-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="non-metric-multidimensional-scaling-of-acoustic-space-use-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/vjjan91/acoustics-westernGhats/edit/master/03_acoustic-space-use.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
