<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 5 Jackknife estimates | Source code for Using acoustics to evaluate the impact of forest restoration on bird communities in the Western Ghats</title>
  <meta name="description" content="Section 5 Jackknife estimates | Source code for Using acoustics to evaluate the impact of forest restoration on bird communities in the Western Ghats" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 5 Jackknife estimates | Source code for Using acoustics to evaluate the impact of forest restoration on bird communities in the Western Ghats" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="vjjan91/acoustics-westernGhats" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 5 Jackknife estimates | Source code for Using acoustics to evaluate the impact of forest restoration on bird communities in the Western Ghats" />
  
  
  

<meta name="author" content="Vijay Ramesh" />
<meta name="author" content="Akshay VA" />
<meta name="author" content="VV Robin" />
<meta name="author" content="Ruth DeFries" />


<meta name="date" content="2021-06-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="acoustic-detections.html"/>
<link rel="next" href="non-metric-multidimensional-scaling-and-indicator-species-analysis.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#attribution"><i class="fa fa-check"></i><b>1.1</b> Attribution</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#data-access"><i class="fa fa-check"></i><b>1.2</b> Data access</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#data-processing"><i class="fa fa-check"></i><b>1.3</b> Data processing</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="splitting-large-wav-files-into-smaller-chunks.html"><a href="splitting-large-wav-files-into-smaller-chunks.html"><i class="fa fa-check"></i><b>2</b> Splitting large .wav files into smaller chunks</a></li>
<li class="chapter" data-level="3" data-path="species-richness-calculations.html"><a href="species-richness-calculations.html"><i class="fa fa-check"></i><b>3</b> Species Richness Calculations</a></li>
<li class="chapter" data-level="4" data-path="acoustic-detections.html"><a href="acoustic-detections.html"><i class="fa fa-check"></i><b>4</b> Acoustic Detections</a></li>
<li class="chapter" data-level="5" data-path="jackknife-estimates.html"><a href="jackknife-estimates.html"><i class="fa fa-check"></i><b>5</b> Jackknife estimates</a></li>
<li class="chapter" data-level="6" data-path="non-metric-multidimensional-scaling-and-indicator-species-analysis.html"><a href="non-metric-multidimensional-scaling-and-indicator-species-analysis.html"><i class="fa fa-check"></i><b>6</b> Non-metric multidimensional scaling and indicator-species analysis</a></li>
<li class="chapter" data-level="7" data-path="preparing-vegetation-data-for-glms.html"><a href="preparing-vegetation-data-for-glms.html"><i class="fa fa-check"></i><b>7</b> Preparing vegetation data for GLMs</a></li>
<li class="chapter" data-level="8" data-path="generalized-linear-modeling-and-generalized-linear-mixed-modeling.html"><a href="generalized-linear-modeling-and-generalized-linear-mixed-modeling.html"><i class="fa fa-check"></i><b>8</b> Generalized linear modeling and generalized linear mixed modeling</a></li>
<li class="chapter" data-level="9" data-path="multiple-regression-of-distance-matrices.html"><a href="multiple-regression-of-distance-matrices.html"><i class="fa fa-check"></i><b>9</b> Multiple regression of distance matrices</a></li>
<li class="chapter" data-level="10" data-path="a-measure-of-vocal-activity.html"><a href="a-measure-of-vocal-activity.html"><i class="fa fa-check"></i><b>10</b> A measure of Vocal Activity</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Source code for <em>Using acoustics to evaluate the impact of forest restoration on bird communities in the Western Ghats</em></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="jackknife-estimates" class="section level1">
<h1><span class="header-section-number">Section 5</span> Jackknife estimates</h1>
<p>In this script, we will extract jackknife scores, which essentially extrapolates species richness for a given species pool. This calculation is based on the number of sites and the number of visits to each site and the number of singletons/doubletons (detecting a species only once/site and twice/site respectively).</p>
<p>Install required libraries</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb16-1"><a href="jackknife-estimates.html#cb16-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb16-2"><a href="jackknife-estimates.html#cb16-2"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb16-3"><a href="jackknife-estimates.html#cb16-3"></a><span class="kw">library</span>(stringr)</span>
<span id="cb16-4"><a href="jackknife-estimates.html#cb16-4"></a><span class="kw">library</span>(vegan)</span>
<span id="cb16-5"><a href="jackknife-estimates.html#cb16-5"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb16-6"><a href="jackknife-estimates.html#cb16-6"></a><span class="kw">library</span>(scico)</span>
<span id="cb16-7"><a href="jackknife-estimates.html#cb16-7"></a><span class="kw">library</span>(psych)</span>
<span id="cb16-8"><a href="jackknife-estimates.html#cb16-8"></a></span>
<span id="cb16-9"><a href="jackknife-estimates.html#cb16-9"></a><span class="co"># Source any custom/other internal functions necessary for analysis</span></span>
<span id="cb16-10"><a href="jackknife-estimates.html#cb16-10"></a><span class="kw">source</span>(<span class="st">&quot;code/01_internal-functions.R&quot;</span>)</span></code></pre></div>
<p>Load the necessary data to calculate Jackknife scores</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb17-1"><a href="jackknife-estimates.html#cb17-1"></a><span class="co"># We load the subset data</span></span>
<span id="cb17-2"><a href="jackknife-estimates.html#cb17-2"></a>datSubset &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/datSubset.csv&quot;</span>)</span>
<span id="cb17-3"><a href="jackknife-estimates.html#cb17-3"></a></span>
<span id="cb17-4"><a href="jackknife-estimates.html#cb17-4"></a><span class="co"># Load species-trait data to essentially check for associations by habitat type</span></span>
<span id="cb17-5"><a href="jackknife-estimates.html#cb17-5"></a>trait_dat &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/species-trait-dat.csv&quot;</span>)</span>
<span id="cb17-6"><a href="jackknife-estimates.html#cb17-6"></a></span>
<span id="cb17-7"><a href="jackknife-estimates.html#cb17-7"></a><span class="co"># Site-summary (Number of detections across all sites)</span></span>
<span id="cb17-8"><a href="jackknife-estimates.html#cb17-8"></a>datSummary &lt;-<span class="st"> </span>datSubset <span class="op">%&gt;%</span></span>
<span id="cb17-9"><a href="jackknife-estimates.html#cb17-9"></a><span class="st">  </span><span class="kw">group_by</span>(Site, Restoration.Type) <span class="op">%&gt;%</span></span>
<span id="cb17-10"><a href="jackknife-estimates.html#cb17-10"></a><span class="st">  </span><span class="kw">transform</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">replace</span>(<span class="kw">is.na</span>(.), <span class="dv">0</span>) <span class="op">%&gt;%</span></span>
<span id="cb17-11"><a href="jackknife-estimates.html#cb17-11"></a><span class="st">  </span><span class="kw">summarise_at</span>(<span class="dt">.vars =</span> <span class="kw">vars</span>(<span class="kw">c</span>(<span class="st">&quot;IP&quot;</span><span class="op">:</span><span class="st">&quot;CR&quot;</span>)),<span class="dt">.funs =</span> sum)</span></code></pre></div>
<p>Preparing dataframe for jacknifing and extracting jacknife scores</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb18-1"><a href="jackknife-estimates.html#cb18-1"></a><span class="co"># Calculate the overall number of detections for each site across X days of data (translates to 16min to 48min of data per site; each detection corresponding to a temporal unit of 10 seconds). Here, we include dates, since each visit can explain the extrapolation of species richness when jackknife estimates are extracted. </span></span>
<span id="cb18-2"><a href="jackknife-estimates.html#cb18-2"></a></span>
<span id="cb18-3"><a href="jackknife-estimates.html#cb18-3"></a>nDetections_site_date &lt;-<span class="st"> </span>datSubset <span class="op">%&gt;%</span></span>
<span id="cb18-4"><a href="jackknife-estimates.html#cb18-4"></a><span class="st">  </span><span class="kw">group_by</span>(Site, Restoration.Type, Date) <span class="op">%&gt;%</span></span>
<span id="cb18-5"><a href="jackknife-estimates.html#cb18-5"></a><span class="st">  </span><span class="kw">transform</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">replace</span>(<span class="kw">is.na</span>(.), <span class="dv">0</span>) <span class="op">%&gt;%</span></span>
<span id="cb18-6"><a href="jackknife-estimates.html#cb18-6"></a><span class="st">  </span><span class="kw">summarise_at</span>(<span class="dt">.vars =</span> <span class="kw">vars</span>(<span class="kw">c</span>(<span class="st">&quot;IP&quot;</span><span class="op">:</span><span class="st">&quot;CR&quot;</span>)),<span class="dt">.funs =</span> sum)</span>
<span id="cb18-7"><a href="jackknife-estimates.html#cb18-7"></a>  </span>
<span id="cb18-8"><a href="jackknife-estimates.html#cb18-8"></a><span class="co"># Combine the nDetections and trait based data to obtain a dataframe for jackknife estimates</span></span>
<span id="cb18-9"><a href="jackknife-estimates.html#cb18-9"></a></span>
<span id="cb18-10"><a href="jackknife-estimates.html#cb18-10"></a>nDetections_trait &lt;-<span class="st"> </span>nDetections_site_date <span class="op">%&gt;%</span></span>
<span id="cb18-11"><a href="jackknife-estimates.html#cb18-11"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols=</span>IP<span class="op">:</span>CR, <span class="dt">names_to=</span><span class="st">&quot;Species_Code&quot;</span>, <span class="dt">values_to=</span><span class="st">&quot;count&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb18-12"><a href="jackknife-estimates.html#cb18-12"></a><span class="st">  </span><span class="kw">left_join</span>(.,trait_dat, <span class="dt">by=</span><span class="kw">c</span>(<span class="st">&quot;Species_Code&quot;</span>=<span class="st">&quot;species_annotation_codes&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb18-13"><a href="jackknife-estimates.html#cb18-13"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">forRichness =</span> <span class="kw">case_when</span>(count<span class="op">&gt;</span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,count<span class="op">==</span><span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span>)) <span class="op">%&gt;%</span></span>
<span id="cb18-14"><a href="jackknife-estimates.html#cb18-14"></a><span class="st">  </span><span class="kw">rename</span>(., <span class="dt">nDetections =</span> count)</span>
<span id="cb18-15"><a href="jackknife-estimates.html#cb18-15"></a></span>
<span id="cb18-16"><a href="jackknife-estimates.html#cb18-16"></a><span class="co"># Extract jackknife scores</span></span>
<span id="cb18-17"><a href="jackknife-estimates.html#cb18-17"></a><span class="co"># To do the same, we first prepare the dataframe in a manner where we have a matrix of Site by Date by Species name</span></span>
<span id="cb18-18"><a href="jackknife-estimates.html#cb18-18"></a></span>
<span id="cb18-19"><a href="jackknife-estimates.html#cb18-19"></a>jacknifeAll &lt;-<span class="st"> </span>nDetections_trait <span class="op">%&gt;%</span></span>
<span id="cb18-20"><a href="jackknife-estimates.html#cb18-20"></a><span class="st">  </span><span class="kw">select</span>(Site, Date, Species_Code, nDetections, Restoration.Type) <span class="op">%&gt;%</span></span>
<span id="cb18-21"><a href="jackknife-estimates.html#cb18-21"></a><span class="st">  </span><span class="kw">group_by</span>(Site, Date, Restoration.Type, Species_Code) <span class="op">%&gt;%</span></span>
<span id="cb18-22"><a href="jackknife-estimates.html#cb18-22"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">totDetections =</span> <span class="kw">sum</span>(nDetections)) <span class="op">%&gt;%</span></span>
<span id="cb18-23"><a href="jackknife-estimates.html#cb18-23"></a><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> Species_Code, <span class="dt">values_from =</span> totDetections, <span class="dt">values_fill =</span> <span class="kw">list</span>(<span class="dt">totDetections=</span><span class="dv">0</span>))</span>
<span id="cb18-24"><a href="jackknife-estimates.html#cb18-24"></a></span>
<span id="cb18-25"><a href="jackknife-estimates.html#cb18-25"></a><span class="co"># Prepare a dataframe of rainforest species for jacknifing</span></span>
<span id="cb18-26"><a href="jackknife-estimates.html#cb18-26"></a></span>
<span id="cb18-27"><a href="jackknife-estimates.html#cb18-27"></a>jacknife_rainForest &lt;-<span class="st"> </span>nDetections_trait <span class="op">%&gt;%</span></span>
<span id="cb18-28"><a href="jackknife-estimates.html#cb18-28"></a><span class="st">  </span><span class="kw">filter</span>(Habitat<span class="op">==</span><span class="st">&quot;RF&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb18-29"><a href="jackknife-estimates.html#cb18-29"></a><span class="st">  </span><span class="kw">select</span>(Site, Date, Species_Code, nDetections, Restoration.Type) <span class="op">%&gt;%</span></span>
<span id="cb18-30"><a href="jackknife-estimates.html#cb18-30"></a><span class="st">  </span><span class="kw">group_by</span>(Site, Date, Restoration.Type, Species_Code) <span class="op">%&gt;%</span></span>
<span id="cb18-31"><a href="jackknife-estimates.html#cb18-31"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">totDetections =</span> <span class="kw">sum</span>(nDetections)) <span class="op">%&gt;%</span></span>
<span id="cb18-32"><a href="jackknife-estimates.html#cb18-32"></a><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> Species_Code, <span class="dt">values_from =</span> totDetections, <span class="dt">values_fill =</span> <span class="kw">list</span>(<span class="dt">totDetections=</span><span class="dv">0</span>))</span>
<span id="cb18-33"><a href="jackknife-estimates.html#cb18-33"></a></span>
<span id="cb18-34"><a href="jackknife-estimates.html#cb18-34"></a><span class="co"># Prepare a dataframe of open-country species for jacknifing</span></span>
<span id="cb18-35"><a href="jackknife-estimates.html#cb18-35"></a></span>
<span id="cb18-36"><a href="jackknife-estimates.html#cb18-36"></a>jacknife_openCountry &lt;-<span class="st"> </span>nDetections_trait <span class="op">%&gt;%</span></span>
<span id="cb18-37"><a href="jackknife-estimates.html#cb18-37"></a><span class="st">  </span><span class="kw">filter</span>(Habitat<span class="op">==</span><span class="st">&quot;OC&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb18-38"><a href="jackknife-estimates.html#cb18-38"></a><span class="st">  </span><span class="kw">select</span>(Site, Date, Species_Code, nDetections, Restoration.Type) <span class="op">%&gt;%</span></span>
<span id="cb18-39"><a href="jackknife-estimates.html#cb18-39"></a><span class="st">  </span><span class="kw">group_by</span>(Site, Date, Restoration.Type, Species_Code) <span class="op">%&gt;%</span></span>
<span id="cb18-40"><a href="jackknife-estimates.html#cb18-40"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">totDetections =</span> <span class="kw">sum</span>(nDetections)) <span class="op">%&gt;%</span></span>
<span id="cb18-41"><a href="jackknife-estimates.html#cb18-41"></a><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> Species_Code, <span class="dt">values_from =</span> totDetections, <span class="dt">values_fill =</span> <span class="kw">list</span>(<span class="dt">totDetections=</span><span class="dv">0</span>))</span></code></pre></div>
<p>Extract jacknife scores</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb19-1"><a href="jackknife-estimates.html#cb19-1"></a>jackAllScore &lt;-<span class="st"> </span><span class="kw">specpool</span>(jacknifeAll[,<span class="dv">4</span><span class="op">:</span><span class="kw">ncol</span>(jacknifeAll)],</span>
<span id="cb19-2"><a href="jackknife-estimates.html#cb19-2"></a>                       <span class="dt">pool =</span> jacknifeAll<span class="op">$</span>Site) <span class="op">%&gt;%</span></span>
<span id="cb19-3"><a href="jackknife-estimates.html#cb19-3"></a><span class="st">  </span><span class="kw">rownames_to_column</span>(<span class="st">&quot;Site&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb19-4"><a href="jackknife-estimates.html#cb19-4"></a><span class="st">  </span><span class="kw">add_column</span> (<span class="dt">Restoration.Type =</span> datSummary<span class="op">$</span>Restoration.Type)</span>
<span id="cb19-5"><a href="jackknife-estimates.html#cb19-5"></a></span>
<span id="cb19-6"><a href="jackknife-estimates.html#cb19-6"></a><span class="co"># write out results</span></span>
<span id="cb19-7"><a href="jackknife-estimates.html#cb19-7"></a><span class="kw">write.csv</span>(jackAllScore, <span class="st">&quot;data/jackAll.csv&quot;</span>, <span class="dt">row.names=</span>F)</span>
<span id="cb19-8"><a href="jackknife-estimates.html#cb19-8"></a></span>
<span id="cb19-9"><a href="jackknife-estimates.html#cb19-9"></a>jack_rainForestScore &lt;-<span class="st"> </span><span class="kw">specpool</span>(jacknife_rainForest[,<span class="dv">4</span><span class="op">:</span><span class="kw">ncol</span>(jacknife_rainForest)],</span>
<span id="cb19-10"><a href="jackknife-estimates.html#cb19-10"></a>                       <span class="dt">pool =</span> jacknife_rainForest<span class="op">$</span>Site) <span class="op">%&gt;%</span></span>
<span id="cb19-11"><a href="jackknife-estimates.html#cb19-11"></a><span class="st">  </span><span class="kw">rownames_to_column</span>(<span class="st">&quot;Site&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb19-12"><a href="jackknife-estimates.html#cb19-12"></a><span class="st">  </span><span class="kw">add_column</span> (<span class="dt">Restoration.Type =</span> datSummary<span class="op">$</span>Restoration.Type)</span>
<span id="cb19-13"><a href="jackknife-estimates.html#cb19-13"></a></span>
<span id="cb19-14"><a href="jackknife-estimates.html#cb19-14"></a><span class="co"># write out results</span></span>
<span id="cb19-15"><a href="jackknife-estimates.html#cb19-15"></a><span class="kw">write.csv</span>(jack_rainForestScore,<span class="st">&quot;data/jackRainforest.csv&quot;</span>, <span class="dt">row.names =</span> F)</span>
<span id="cb19-16"><a href="jackknife-estimates.html#cb19-16"></a></span>
<span id="cb19-17"><a href="jackknife-estimates.html#cb19-17"></a>jack_openCountryScore &lt;-<span class="kw">specpool</span>(jacknife_openCountry[,<span class="dv">4</span><span class="op">:</span><span class="kw">ncol</span>(jacknife_openCountry)],</span>
<span id="cb19-18"><a href="jackknife-estimates.html#cb19-18"></a>                       <span class="dt">pool =</span> jacknife_openCountry<span class="op">$</span>Site) <span class="op">%&gt;%</span></span>
<span id="cb19-19"><a href="jackknife-estimates.html#cb19-19"></a><span class="st">  </span><span class="kw">rownames_to_column</span>(<span class="st">&quot;Site&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb19-20"><a href="jackknife-estimates.html#cb19-20"></a><span class="st">  </span><span class="kw">add_column</span> (<span class="dt">Restoration.Type =</span> datSummary<span class="op">$</span>Restoration.Type)</span>
<span id="cb19-21"><a href="jackknife-estimates.html#cb19-21"></a></span>
<span id="cb19-22"><a href="jackknife-estimates.html#cb19-22"></a><span class="co"># write out results</span></span>
<span id="cb19-23"><a href="jackknife-estimates.html#cb19-23"></a><span class="kw">write.csv</span>(jack_openCountryScore, <span class="st">&quot;data/jackOpencountry.csv&quot;</span>, <span class="dt">row.names =</span> F)</span></code></pre></div>
<p>Looking at correlations between jacknife scores and bootstrap estimates</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb20-1"><a href="jackknife-estimates.html#cb20-1"></a><span class="co"># This plot suggests an almost 1:1 correlation between jacknife estimates and bootstrap scores</span></span>
<span id="cb20-2"><a href="jackknife-estimates.html#cb20-2"></a><span class="kw">plot</span>(jackAllScore<span class="op">$</span>jack1, jackAllScore<span class="op">$</span>boot)</span></code></pre></div>
<p>Plotting jacknife estimates and testing for any significant differences between treatment types</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb21-1"><a href="jackknife-estimates.html#cb21-1"></a><span class="co"># Test if there are significant differences in jacknife estimates across treatment types</span></span>
<span id="cb21-2"><a href="jackknife-estimates.html#cb21-2"></a>anovaJackAll &lt;-<span class="st"> </span><span class="kw">aov</span>(jack1<span class="op">~</span>Restoration.Type, <span class="dt">data =</span> jackAllScore)</span>
<span id="cb21-3"><a href="jackknife-estimates.html#cb21-3"></a></span>
<span id="cb21-4"><a href="jackknife-estimates.html#cb21-4"></a><span class="co"># Tukey test to study each pair of treatment - reveals no signficant difference across treatment types</span></span>
<span id="cb21-5"><a href="jackknife-estimates.html#cb21-5"></a>tukeyJackAll &lt;-<span class="st"> </span><span class="kw">TukeyHSD</span>(anovaJackAll)</span>
<span id="cb21-6"><a href="jackknife-estimates.html#cb21-6"></a></span>
<span id="cb21-7"><a href="jackknife-estimates.html#cb21-7"></a><span class="co"># The above result suggests that there are no differences in overall jacknife estimates across treatment types</span></span>
<span id="cb21-8"><a href="jackknife-estimates.html#cb21-8"></a></span>
<span id="cb21-9"><a href="jackknife-estimates.html#cb21-9"></a><span class="co"># Create a boxplot of jacknife estimates by group (Here: group refers to Restoration Type)</span></span>
<span id="cb21-10"><a href="jackknife-estimates.html#cb21-10"></a><span class="co"># Temporary plots based on uneven visits to a site. Note it ranges from 1 to 3 visits.</span></span>
<span id="cb21-11"><a href="jackknife-estimates.html#cb21-11"></a></span>
<span id="cb21-12"><a href="jackknife-estimates.html#cb21-12"></a>fig_jackAll &lt;-<span class="st"> </span><span class="kw">ggplot</span>(jackAllScore, <span class="kw">aes</span>(<span class="dt">x=</span>Restoration.Type, <span class="dt">y=</span>jack1, <span class="dt">fill=</span>Restoration.Type)) <span class="op">+</span><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">alpha=</span><span class="fl">0.7</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb21-13"><a href="jackknife-estimates.html#cb21-13"></a><span class="st">    </span><span class="kw">scale_fill_scico_d</span>(<span class="dt">palette =</span> <span class="st">&quot;roma&quot;</span>) <span class="op">+</span></span>
<span id="cb21-14"><a href="jackknife-estimates.html#cb21-14"></a><span class="st">    </span><span class="kw">theme_bw</span>() <span class="op">+</span></span>
<span id="cb21-15"><a href="jackknife-estimates.html#cb21-15"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;Restoration Type&quot;</span>, </span>
<span id="cb21-16"><a href="jackknife-estimates.html#cb21-16"></a>       <span class="dt">y=</span><span class="st">&quot;Jacknife scores&quot;</span>) <span class="op">+</span></span>
<span id="cb21-17"><a href="jackknife-estimates.html#cb21-17"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb21-18"><a href="jackknife-estimates.html#cb21-18"></a>        <span class="dt">axis.ticks.length.x =</span> <span class="kw">unit</span>(.<span class="dv">5</span>, <span class="st">&quot;cm&quot;</span>),</span>
<span id="cb21-19"><a href="jackknife-estimates.html#cb21-19"></a>        <span class="dt">axis.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">14</span>),</span>
<span id="cb21-20"><a href="jackknife-estimates.html#cb21-20"></a>        <span class="dt">legend.title =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb21-21"><a href="jackknife-estimates.html#cb21-21"></a>        <span class="dt">legend.key.size =</span> <span class="kw">unit</span>(<span class="dv">1</span>,<span class="st">&quot;cm&quot;</span>),</span>
<span id="cb21-22"><a href="jackknife-estimates.html#cb21-22"></a>        <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>))</span>
<span id="cb21-23"><a href="jackknife-estimates.html#cb21-23"></a></span>
<span id="cb21-24"><a href="jackknife-estimates.html#cb21-24"></a><span class="kw">ggsave</span>(fig_jackAll, <span class="dt">filename =</span> <span class="st">&quot;figs/fig_jackAll.png&quot;</span>, <span class="dt">width=</span><span class="dv">12</span>, <span class="dt">height=</span><span class="dv">7</span>,</span>
<span id="cb21-25"><a href="jackknife-estimates.html#cb21-25"></a>       <span class="dt">device =</span> <span class="kw">png</span>(), <span class="dt">units=</span><span class="st">&quot;in&quot;</span>, <span class="dt">dpi =</span> <span class="dv">300</span>); <span class="kw">dev.off</span>()</span>
<span id="cb21-26"><a href="jackknife-estimates.html#cb21-26"></a></span>
<span id="cb21-27"><a href="jackknife-estimates.html#cb21-27"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&quot;figs/fig_jackAll.png&quot;</span>)</span>
<span id="cb21-28"><a href="jackknife-estimates.html#cb21-28"></a></span>
<span id="cb21-29"><a href="jackknife-estimates.html#cb21-29"></a><span class="co"># We observe that the overall jacknife estimates is similar across passively restored forest patches and benchmark (protected area) forest patches while actively restored forest patches have lower jacknife estimates(But these differences are not significant)</span></span></code></pre></div>
<p>Let’s test for significant differences in jacknife estimates as a function of species trait</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb22-1"><a href="jackknife-estimates.html#cb22-1"></a>anovaJack_rainForest &lt;-<span class="st"> </span><span class="kw">aov</span>(jack1<span class="op">~</span>Restoration.Type, <span class="dt">data =</span> jack_rainForestScore)</span>
<span id="cb22-2"><a href="jackknife-estimates.html#cb22-2"></a>anovaJack_openCountry &lt;-<span class="st"> </span><span class="kw">aov</span>(jack1<span class="op">~</span>Restoration.Type, <span class="dt">data =</span> jack_openCountryScore)</span>
<span id="cb22-3"><a href="jackknife-estimates.html#cb22-3"></a></span>
<span id="cb22-4"><a href="jackknife-estimates.html#cb22-4"></a><span class="co"># Tukey test to study each pair of treatment </span></span>
<span id="cb22-5"><a href="jackknife-estimates.html#cb22-5"></a>tukeyJack_rainForest &lt;-<span class="st"> </span><span class="kw">TukeyHSD</span>(anovaJack_rainForest)</span>
<span id="cb22-6"><a href="jackknife-estimates.html#cb22-6"></a>tukeyJack_openCountry &lt;-<span class="st"> </span><span class="kw">TukeyHSD</span>(anovaJack_openCountry)</span>
<span id="cb22-7"><a href="jackknife-estimates.html#cb22-7"></a></span>
<span id="cb22-8"><a href="jackknife-estimates.html#cb22-8"></a><span class="co"># For rainforest species - there is a significant difference in jacknife estimates between benchmark and active sites, while there is no difference in jacknife estimates across strata for open country species of birds</span></span>
<span id="cb22-9"><a href="jackknife-estimates.html#cb22-9"></a></span>
<span id="cb22-10"><a href="jackknife-estimates.html#cb22-10"></a><span class="co"># Plot the above results</span></span>
<span id="cb22-11"><a href="jackknife-estimates.html#cb22-11"></a><span class="co"># Rainforest species</span></span>
<span id="cb22-12"><a href="jackknife-estimates.html#cb22-12"></a>fig_jack_rainForest &lt;-<span class="st"> </span><span class="kw">ggplot</span>(jack_rainForestScore, <span class="kw">aes</span>(<span class="dt">x=</span>Restoration.Type, <span class="dt">y=</span>jack1, <span class="dt">fill=</span>Restoration.Type)) <span class="op">+</span></span>
<span id="cb22-13"><a href="jackknife-estimates.html#cb22-13"></a><span class="st">    </span><span class="kw">geom_boxplot</span>(<span class="dt">alpha=</span><span class="fl">0.7</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb22-14"><a href="jackknife-estimates.html#cb22-14"></a><span class="st">    </span><span class="kw">scale_fill_scico_d</span>(<span class="dt">palette =</span> <span class="st">&quot;roma&quot;</span>) <span class="op">+</span></span>
<span id="cb22-15"><a href="jackknife-estimates.html#cb22-15"></a><span class="st">    </span><span class="kw">theme_bw</span>() <span class="op">+</span></span>
<span id="cb22-16"><a href="jackknife-estimates.html#cb22-16"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;Restoration Type&quot;</span>, </span>
<span id="cb22-17"><a href="jackknife-estimates.html#cb22-17"></a>       <span class="dt">y=</span><span class="st">&quot;Jacknife estimates for Rainforest species&quot;</span>) <span class="op">+</span></span>
<span id="cb22-18"><a href="jackknife-estimates.html#cb22-18"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb22-19"><a href="jackknife-estimates.html#cb22-19"></a>        <span class="dt">axis.ticks.length.x =</span> <span class="kw">unit</span>(.<span class="dv">5</span>, <span class="st">&quot;cm&quot;</span>),</span>
<span id="cb22-20"><a href="jackknife-estimates.html#cb22-20"></a>        <span class="dt">axis.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">14</span>),</span>
<span id="cb22-21"><a href="jackknife-estimates.html#cb22-21"></a>        <span class="dt">legend.title =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb22-22"><a href="jackknife-estimates.html#cb22-22"></a>        <span class="dt">legend.key.size =</span> <span class="kw">unit</span>(<span class="dv">1</span>,<span class="st">&quot;cm&quot;</span>),</span>
<span id="cb22-23"><a href="jackknife-estimates.html#cb22-23"></a>        <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>))</span>
<span id="cb22-24"><a href="jackknife-estimates.html#cb22-24"></a></span>
<span id="cb22-25"><a href="jackknife-estimates.html#cb22-25"></a><span class="kw">ggsave</span>(fig_jack_rainForest, <span class="dt">filename =</span> <span class="st">&quot;figs/fig_jack_rainForest.png&quot;</span>, <span class="dt">width=</span><span class="dv">12</span>, <span class="dt">height=</span><span class="dv">7</span>,<span class="dt">device =</span> <span class="kw">png</span>(), <span class="dt">units=</span><span class="st">&quot;in&quot;</span>, <span class="dt">dpi =</span> <span class="dv">300</span>); <span class="kw">dev.off</span>()</span>
<span id="cb22-26"><a href="jackknife-estimates.html#cb22-26"></a></span>
<span id="cb22-27"><a href="jackknife-estimates.html#cb22-27"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&quot;figs/fig_jack_rainForest.png&quot;</span>)</span>
<span id="cb22-28"><a href="jackknife-estimates.html#cb22-28"></a></span>
<span id="cb22-29"><a href="jackknife-estimates.html#cb22-29"></a><span class="co"># Opencountry species</span></span>
<span id="cb22-30"><a href="jackknife-estimates.html#cb22-30"></a>fig_jack_openCountry &lt;-<span class="st"> </span><span class="kw">ggplot</span>(jack_openCountryScore, <span class="kw">aes</span>(<span class="dt">x=</span>Restoration.Type, <span class="dt">y=</span>jack1, <span class="dt">fill=</span>Restoration.Type)) <span class="op">+</span></span>
<span id="cb22-31"><a href="jackknife-estimates.html#cb22-31"></a><span class="st">    </span><span class="kw">geom_boxplot</span>(<span class="dt">alpha=</span><span class="fl">0.7</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb22-32"><a href="jackknife-estimates.html#cb22-32"></a><span class="st">    </span><span class="kw">scale_fill_scico_d</span>(<span class="dt">palette =</span> <span class="st">&quot;roma&quot;</span>) <span class="op">+</span></span>
<span id="cb22-33"><a href="jackknife-estimates.html#cb22-33"></a><span class="st">    </span><span class="kw">theme_bw</span>() <span class="op">+</span></span>
<span id="cb22-34"><a href="jackknife-estimates.html#cb22-34"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;Restoration Type&quot;</span>, </span>
<span id="cb22-35"><a href="jackknife-estimates.html#cb22-35"></a>       <span class="dt">y=</span><span class="st">&quot;Jacknife estimates for Opencountry species&quot;</span>) <span class="op">+</span></span>
<span id="cb22-36"><a href="jackknife-estimates.html#cb22-36"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>), </span>
<span id="cb22-37"><a href="jackknife-estimates.html#cb22-37"></a>        <span class="dt">axis.ticks.length.x =</span> <span class="kw">unit</span>(.<span class="dv">5</span>, <span class="st">&quot;cm&quot;</span>),</span>
<span id="cb22-38"><a href="jackknife-estimates.html#cb22-38"></a>        <span class="dt">axis.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">14</span>),</span>
<span id="cb22-39"><a href="jackknife-estimates.html#cb22-39"></a>        <span class="dt">legend.title =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb22-40"><a href="jackknife-estimates.html#cb22-40"></a>        <span class="dt">legend.key.size =</span> <span class="kw">unit</span>(<span class="dv">1</span>,<span class="st">&quot;cm&quot;</span>),</span>
<span id="cb22-41"><a href="jackknife-estimates.html#cb22-41"></a>        <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>))</span>
<span id="cb22-42"><a href="jackknife-estimates.html#cb22-42"></a></span>
<span id="cb22-43"><a href="jackknife-estimates.html#cb22-43"></a><span class="kw">ggsave</span>(fig_jack_openCountry, <span class="dt">filename =</span> <span class="st">&quot;figs/fig_jack_openCountry.png&quot;</span>, <span class="dt">width=</span><span class="dv">12</span>, <span class="dt">height=</span><span class="dv">7</span>,<span class="dt">device =</span> <span class="kw">png</span>(), <span class="dt">units=</span><span class="st">&quot;in&quot;</span>, <span class="dt">dpi =</span> <span class="dv">300</span>); <span class="kw">dev.off</span>()</span>
<span id="cb22-44"><a href="jackknife-estimates.html#cb22-44"></a></span>
<span id="cb22-45"><a href="jackknife-estimates.html#cb22-45"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&quot;figs/fig_jack_openCountry.png&quot;</span>)</span></code></pre></div>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="acoustic-detections.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="non-metric-multidimensional-scaling-and-indicator-species-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/vjjan91/acoustics-westernGhats/edit/master/04_jackknife-scores.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
